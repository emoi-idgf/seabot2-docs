<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="depth__control_8h" kind="file" language="C++">
    <compoundname>depth_control.h</compoundname>
    <includes local="no">eigen3/Eigen/Dense</includes>
    <includes local="no">cmath</includes>
    <includes local="no">cstdint</includes>
    <includes local="yes">rclcpp/rclcpp.hpp</includes>
    <includes refid="alpha__solver_8h" local="yes">seabot2_depth_control/alpha_solver.h</includes>
    <includedby refid="depth__control__node_8hpp" local="yes">/home/tristanlf/seabot2/seabot2-ros/src/seabot2_control/seabot2_depth_control/include/seabot2_depth_control/depth_control_node.hpp</includedby>
    <includedby refid="depth__control_8cpp" local="yes">/home/tristanlf/seabot2/seabot2-ros/src/seabot2_control/seabot2_depth_control/src/depth_control.cpp</includedby>
    <incdepgraph>
      <node id="6">
        <label>seabot2_depth_control/alpha_solver.h</label>
        <link refid="alpha__solver_8h"/>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
      </node>
      <node id="1">
        <label>/home/tristanlf/seabot2/seabot2-ros/src/seabot2_control/seabot2_depth_control/include/seabot2_depth_control/depth_control.h</label>
        <link refid="depth__control_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="3" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="7">
        <label>array</label>
      </node>
      <node id="3">
        <label>cmath</label>
      </node>
      <node id="4">
        <label>cstdint</label>
      </node>
      <node id="2">
        <label>eigen3/Eigen/Dense</label>
      </node>
      <node id="5">
        <label>rclcpp/rclcpp.hpp</label>
      </node>
      <node id="9">
        <label>utility</label>
      </node>
      <node id="8">
        <label>vector</label>
      </node>
    </incdepgraph>
    <invincdepgraph>
      <node id="1">
        <label>/home/tristanlf/seabot2/seabot2-ros/src/seabot2_control/seabot2_depth_control/include/seabot2_depth_control/depth_control.h</label>
        <link refid="depth__control_8h"/>
        <childnode refid="2" relation="include">
        </childnode>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>/home/tristanlf/seabot2/seabot2-ros/src/seabot2_control/seabot2_depth_control/include/seabot2_depth_control/depth_control_node.hpp</label>
        <link refid="depth__control__node_8hpp"/>
        <childnode refid="3" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>/home/tristanlf/seabot2/seabot2-ros/src/seabot2_control/seabot2_depth_control/src/depth_control.cpp</label>
        <link refid="depth__control_8cpp"/>
      </node>
      <node id="3">
        <label>/home/tristanlf/seabot2/seabot2-ros/src/seabot2_control/seabot2_depth_control/src/depth_control_node.cpp</label>
        <link refid="depth__control__node_8cpp"/>
      </node>
    </invincdepgraph>
    <innerclass refid="classDepthControl" prot="public">DepthControl</innerclass>
    <innernamespace refid="namespacestd_1_1chrono__literals">std::chrono_literals</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Created<sp/>by<sp/>lemezoth<sp/>on<sp/>18/05/23.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#ifndef<sp/>SEABOT2_DEPTH_CONTROL__DEPTH_CONTROL_H_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>SEABOT2_DEPTH_CONTROL__DEPTH_CONTROL_H_</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;eigen3/Eigen/Dense&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;cmath&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;cstdint&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;rclcpp/rclcpp.hpp&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="alpha__solver_8h" kindref="compound">seabot2_depth_control/alpha_solver.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="keyword">using<sp/>namespace<sp/></highlight><highlight class="normal">std::chrono_literals;</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight></codeline>
<codeline lineno="17" refid="classDepthControl" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classDepthControl" kindref="compound">DepthControl</ref><sp/>{</highlight></codeline>
<codeline lineno="18"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><ref refid="classDepthControl" kindref="compound">DepthControl</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>rclcpp::Time<sp/>&amp;<sp/>start_time);</highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight></codeline>
<codeline lineno="21" refid="classDepthControl_1aa9835a33cd9007caabc8598e9571687f" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1aa9835a33cd9007caabc8598e9571687f" kindref="member">PISTON_STATE_OK</ref><sp/>=<sp/>2;</highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight></codeline>
<codeline lineno="23" refid="classDepthControl_1a07b15b4ea2453394f39861d4f57ed326" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a07b15b4ea2453394f39861d4f57ed326" kindref="member">debug_</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="26" refid="classDepthControl_1a9de8d9b7d17873ff3f0a97de5b409a0c" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="classAlphaSolver" kindref="compound">AlphaSolver</ref><sp/><ref refid="classDepthControl_1a9de8d9b7d17873ff3f0a97de5b409a0c" kindref="member">alpha_solver_</ref>;</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28" refid="classDepthControl_1a3011e548c11fb4e45c696c040a7492e1" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a3011e548c11fb4e45c696c040a7492e1" kindref="member">emergency_</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="29" refid="classDepthControl_1a411f5a2fbae7d78ba0f31cb9a5ce66a1" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a411f5a2fbae7d78ba0f31cb9a5ce66a1" kindref="member">limit_depth_</ref><sp/>=<sp/>100.0;</highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="32" refid="classDepthControl_1a22270dcfc662ccb95bd0a3209b2d7783" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a22270dcfc662ccb95bd0a3209b2d7783" kindref="member">physics_rho_</ref><sp/>=<sp/>1000.0;</highlight></codeline>
<codeline lineno="33" refid="classDepthControl_1ab6743c1a698eea72aa2ce5e830ea9419" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1ab6743c1a698eea72aa2ce5e830ea9419" kindref="member">physics_g_</ref><sp/>=<sp/>9.81;</highlight></codeline>
<codeline lineno="34" refid="classDepthControl_1a1ad45fb4e3a6213e60be3139d899a2c0" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a1ad45fb4e3a6213e60be3139d899a2c0" kindref="member">robot_mass_</ref><sp/>=<sp/>12.0;</highlight></codeline>
<codeline lineno="35" refid="classDepthControl_1adbf048468788abf5ac6d9e839f9f70f9" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1adbf048468788abf5ac6d9e839f9f70f9" kindref="member">robot_added_mass_</ref><sp/>=<sp/>2.51;</highlight></codeline>
<codeline lineno="36" refid="classDepthControl_1a5ab5866c2ec4f635a9d9dc917135bc52" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a5ab5866c2ec4f635a9d9dc917135bc52" kindref="member">robot_diameter_</ref><sp/>=<sp/>0.125;</highlight></codeline>
<codeline lineno="37" refid="classDepthControl_1aa3e413a415d43b1ed90e81035d455deb" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1aa3e413a415d43b1ed90e81035d455deb" kindref="member">screw_thread_</ref><sp/>=<sp/>1.e-3;</highlight></codeline>
<codeline lineno="38" refid="classDepthControl_1a7ebda0fccee8177240aad732c770d337" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a7ebda0fccee8177240aad732c770d337" kindref="member">tick_per_turn_</ref><sp/>=<sp/>2048<sp/>*<sp/>4;</highlight></codeline>
<codeline lineno="39" refid="classDepthControl_1ac7f6dba2b1f92c550a1b90d5f9880647" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1ac7f6dba2b1f92c550a1b90d5f9880647" kindref="member">piston_diameter_</ref><sp/>=<sp/>0.045;</highlight></codeline>
<codeline lineno="40" refid="classDepthControl_1aa0f81d9d6ff5413aa0e3d949253ae03b" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1aa0f81d9d6ff5413aa0e3d949253ae03b" kindref="member">piston_max_tick_value_</ref><sp/>=<sp/>1146880;</highlight></codeline>
<codeline lineno="41" refid="classDepthControl_1a7fe6d0f2852df4467f7c9dbf4d348935" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a7fe6d0f2852df4467f7c9dbf4d348935" kindref="member">degree_to_kelvin_</ref><sp/>=<sp/>273.15;</highlight></codeline>
<codeline lineno="42"><highlight class="normal"></highlight></codeline>
<codeline lineno="43" refid="classDepthControl_1a873f195fc16ee70cc0ef656be5d7881d" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a873f195fc16ee70cc0ef656be5d7881d" kindref="member">tick_to_volume_</ref><sp/>=<sp/>(<ref refid="classDepthControl_1aa3e413a415d43b1ed90e81035d455deb" kindref="member">screw_thread_</ref><sp/>/<sp/><ref refid="classDepthControl_1a7ebda0fccee8177240aad732c770d337" kindref="member">tick_per_turn_</ref>)<sp/>*<sp/>pow(<ref refid="classDepthControl_1ac7f6dba2b1f92c550a1b90d5f9880647" kindref="member">piston_diameter_</ref><sp/>/<sp/>2.0,<sp/>2)<sp/>*<sp/><ref refid="FusionMath_8h_1ae71449b1cc6e6250b91f539153a7a0d3" kindref="member">M_PI</ref>;</highlight></codeline>
<codeline lineno="44" refid="classDepthControl_1a770f4de8b01b4ccfe9177def2407e163" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a770f4de8b01b4ccfe9177def2407e163" kindref="member">coeff_A_</ref><sp/>=<sp/><ref refid="classDepthControl_1ab6743c1a698eea72aa2ce5e830ea9419" kindref="member">physics_g_</ref><sp/>*<sp/><ref refid="classDepthControl_1a22270dcfc662ccb95bd0a3209b2d7783" kindref="member">physics_rho_</ref><sp/>/<sp/>(<ref refid="classDepthControl_1adbf048468788abf5ac6d9e839f9f70f9" kindref="member">robot_added_mass_</ref><sp/>+<sp/><ref refid="classDepthControl_1a1ad45fb4e3a6213e60be3139d899a2c0" kindref="member">robot_mass_</ref>);</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>double<sp/>coeff_B_<sp/>=<sp/>0.5<sp/>*<sp/>physics_rho_<sp/>*<sp/>S_<sp/>/<sp/>(2.0<sp/>*<sp/>robot_mass_);</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="46" refid="classDepthControl_1a690b60fe3d02fe5d7212b7dd31d7271a" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a690b60fe3d02fe5d7212b7dd31d7271a" kindref="member">coeff_B_</ref><sp/>=<sp/>0.5<sp/>*<sp/><ref refid="classDepthControl_1a22270dcfc662ccb95bd0a3209b2d7783" kindref="member">physics_rho_</ref><sp/>/<sp/>(<ref refid="classDepthControl_1adbf048468788abf5ac6d9e839f9f70f9" kindref="member">robot_added_mass_</ref><sp/>+<sp/><ref refid="classDepthControl_1a1ad45fb4e3a6213e60be3139d899a2c0" kindref="member">robot_mass_</ref>);</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48" refid="classDepthControl_1a71fe2a1ffe1929e1c7f458f7e961fd5f" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a71fe2a1ffe1929e1c7f458f7e961fd5f" kindref="member">fz_model_boundary_velocity_positive_</ref><sp/>=<sp/>0.267911611144239;</highlight></codeline>
<codeline lineno="49" refid="classDepthControl_1a86aaf81a8dd7b663f5d0c5439d3a6c3e" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a86aaf81a8dd7b663f5d0c5439d3a6c3e" kindref="member">fz_model_boundary_velocity_negative_</ref><sp/>=<sp/>-0.272937623109179;</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51" refid="classDepthControl_1aa69a7eb881dba7434828fb4b917ac6d4" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1aa69a7eb881dba7434828fb4b917ac6d4" kindref="member">fz_derivative_at_model_boundary_positive_</ref><sp/>=</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classDepthControl_1a3409274ce6627e6b6eb5fb453d4c8527" kindref="member">fz_derivative_computation</ref>(<ref refid="classDepthControl_1a71fe2a1ffe1929e1c7f458f7e961fd5f" kindref="member">fz_model_boundary_velocity_positive_</ref>);</highlight></codeline>
<codeline lineno="53" refid="classDepthControl_1af61b7102d5232e9e0aa19e4010f5e9d2" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1af61b7102d5232e9e0aa19e4010f5e9d2" kindref="member">fz_offset_at_model_boundary_positive_</ref><sp/>=</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classDepthControl_1acb75181f01e2f3d3816d9c1ce98519d6" kindref="member">fz_computation</ref>(<ref refid="classDepthControl_1a71fe2a1ffe1929e1c7f458f7e961fd5f" kindref="member">fz_model_boundary_velocity_positive_</ref>)<sp/>-</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classDepthControl_1aa69a7eb881dba7434828fb4b917ac6d4" kindref="member">fz_derivative_at_model_boundary_positive_</ref><sp/>*<sp/><ref refid="classDepthControl_1a71fe2a1ffe1929e1c7f458f7e961fd5f" kindref="member">fz_model_boundary_velocity_positive_</ref>;</highlight></codeline>
<codeline lineno="56" refid="classDepthControl_1ad8019f3eb15afafdc9f6401f7d3cdbc0" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1ad8019f3eb15afafdc9f6401f7d3cdbc0" kindref="member">fz_derivative_at_model_boundary_negative_</ref><sp/>=</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classDepthControl_1a3409274ce6627e6b6eb5fb453d4c8527" kindref="member">fz_derivative_computation</ref>(<ref refid="classDepthControl_1a86aaf81a8dd7b663f5d0c5439d3a6c3e" kindref="member">fz_model_boundary_velocity_negative_</ref>);</highlight></codeline>
<codeline lineno="58" refid="classDepthControl_1accef033c8fd35192ed75c9caf684006a" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1accef033c8fd35192ed75c9caf684006a" kindref="member">fz_offset_at_model_boundary_negative_</ref><sp/>=</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classDepthControl_1acb75181f01e2f3d3816d9c1ce98519d6" kindref="member">fz_computation</ref>(<ref refid="classDepthControl_1a86aaf81a8dd7b663f5d0c5439d3a6c3e" kindref="member">fz_model_boundary_velocity_negative_</ref>)<sp/>-</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classDepthControl_1ad8019f3eb15afafdc9f6401f7d3cdbc0" kindref="member">fz_derivative_at_model_boundary_negative_</ref><sp/>*<sp/><ref refid="classDepthControl_1a86aaf81a8dd7b663f5d0c5439d3a6c3e" kindref="member">fz_model_boundary_velocity_negative_</ref>;</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="63" refid="classDepthControl_1a901eb8800886555607963d28a46cd247" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a901eb8800886555607963d28a46cd247" kindref="member">root_regulation_</ref><sp/>=<sp/>-0.2;</highlight></codeline>
<codeline lineno="64" refid="classDepthControl_1aeeb3dba2fb490cb18a26c712d0266b77" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1aeeb3dba2fb490cb18a26c712d0266b77" kindref="member">limit_depth_control_</ref><sp/>=<sp/>0.5;<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="65" refid="classDepthControl_1a99600b6dd5902df4f38c91ecea8b6233" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a99600b6dd5902df4f38c91ecea8b6233" kindref="member">flow_piston_sink_</ref><sp/>=<sp/>-5e-7;<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight></codeline>
<codeline lineno="67" refid="classDepthControl_1ac479147c93b89ebd0b98759298c674bf" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1ac479147c93b89ebd0b98759298c674bf" kindref="member">piston_reach_position_dead_zone_</ref><sp/>=<sp/>50.;</highlight></codeline>
<codeline lineno="68" refid="classDepthControl_1ae873795e04353ec099ae4c28de869eab" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1ae873795e04353ec099ae4c28de869eab" kindref="member">piston_hysteresis_</ref><sp/>=<sp/>0.6;</highlight></codeline>
<codeline lineno="69" refid="classDepthControl_1aa453367ec30b6ebb48355d730e51f0f6" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1aa453367ec30b6ebb48355d730e51f0f6" kindref="member">motor_max_rpm_</ref><sp/>=<sp/>38.0;</highlight></codeline>
<codeline lineno="70" refid="classDepthControl_1a2d3a15ffc910793830f608ee5c455f35" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a2d3a15ffc910793830f608ee5c455f35" kindref="member">flow_max_</ref><sp/>=<sp/>(<ref refid="classDepthControl_1aa453367ec30b6ebb48355d730e51f0f6" kindref="member">motor_max_rpm_</ref><sp/>/<sp/>60.)<sp/>*<sp/><ref refid="classDepthControl_1a7ebda0fccee8177240aad732c770d337" kindref="member">tick_per_turn_</ref><sp/>*<sp/><ref refid="classDepthControl_1a873f195fc16ee70cc0ef656be5d7881d" kindref="member">tick_to_volume_</ref>;<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72" refid="classDepthControl_1a9453df97db241b35dbcbf192e65405f2" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a9453df97db241b35dbcbf192e65405f2" kindref="member">piston_flow_security_percentage_</ref><sp/>=<sp/>0.5;</highlight></codeline>
<codeline lineno="73"><highlight class="normal"></highlight></codeline>
<codeline lineno="75" refid="classDepthControl_1ab23c5141cfa6aaae39c4e161bda2b21f" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1ab23c5141cfa6aaae39c4e161bda2b21f" kindref="member">hold_depth_enable_</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="76" refid="classDepthControl_1ab4cd21949282bcd5a4e41be058374b70" refkind="member"><highlight class="normal"><sp/><sp/>rclcpp::Duration<sp/><ref refid="classDepthControl_1ab4cd21949282bcd5a4e41be058374b70" kindref="member">hold_depth_validation_duration_</ref><sp/>=<sp/>30s;</highlight></codeline>
<codeline lineno="77" refid="classDepthControl_1a5a6b1b5ef2f8fb5a98e5851754e8a449" refkind="member"><highlight class="normal"><sp/><sp/>rclcpp::Time<sp/><ref refid="classDepthControl_1a5a6b1b5ef2f8fb5a98e5851754e8a449" kindref="member">hold_depth_validation_time_</ref><sp/>{};</highlight></codeline>
<codeline lineno="78" refid="classDepthControl_1a794580981df0e68f66b776a049758d52" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a794580981df0e68f66b776a049758d52" kindref="member">hold_depth_validation_</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="79" refid="classDepthControl_1aef7351f3662d9e60cc1bed8266b1fb06" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1aef7351f3662d9e60cc1bed8266b1fb06" kindref="member">hold_depth_value_enter_</ref><sp/>=<sp/>0.0;<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="80" refid="classDepthControl_1aa10434c9421f25f5281f195b58675069" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1aa10434c9421f25f5281f195b58675069" kindref="member">hold_depth_value_exit_</ref><sp/>=<sp/>0.0;<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="81" refid="classDepthControl_1a544e36c1e036a249574637acf6d4253d" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a544e36c1e036a249574637acf6d4253d" kindref="member">hold_velocity_enter_</ref><sp/>=<sp/>0.0;<sp/><sp/><sp/></highlight></codeline>
<codeline lineno="82" refid="classDepthControl_1a1f936e9c5dd54976e8921441e442161d" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a1f936e9c5dd54976e8921441e442161d" kindref="member">hold_velocity_exit_</ref><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight></codeline>
<codeline lineno="84" refid="classDepthControl_1a65b156b416bf16565ded205926903b15" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a65b156b416bf16565ded205926903b15" kindref="member">control_filter_</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="85" refid="classDepthControl_1aa19682558432a49f98adc4e69f069d76" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1aa19682558432a49f98adc4e69f069d76" kindref="member">delta_velocity_lb_</ref><sp/>=<sp/>-1e-3;</highlight></codeline>
<codeline lineno="86" refid="classDepthControl_1a1117d35f953065e3a72a4837b348a27f" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a1117d35f953065e3a72a4837b348a27f" kindref="member">delta_velocity_ub_</ref><sp/>=<sp/>1e-3;</highlight></codeline>
<codeline lineno="87" refid="classDepthControl_1a6b948e5653c56e15b99916ef81f9fd6a" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a6b948e5653c56e15b99916ef81f9fd6a" kindref="member">delta_position_lb_</ref><sp/>=<sp/>-10e-3;</highlight></codeline>
<codeline lineno="88" refid="classDepthControl_1ac7470eeeca4df9fb0197554d1750c69f" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1ac7470eeeca4df9fb0197554d1750c69f" kindref="member">delta_position_ub_</ref><sp/>=<sp/>10e-3;</highlight></codeline>
<codeline lineno="89"><highlight class="normal"></highlight></codeline>
<codeline lineno="90" refid="classDepthControl_1a276df80b9ebdc77ec3f63b3b9b190089" refkind="member"><highlight class="normal"><sp/><sp/>rclcpp::Duration<sp/><ref refid="classDepthControl_1a276df80b9ebdc77ec3f63b3b9b190089" kindref="member">safety_time_no_data_</ref><sp/>=<sp/>5s;</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92" refid="classDepthControl_1a3db4274c7b5984e40b8da78ab70527e5" refkind="member"><highlight class="normal"><sp/><sp/>int64_t<sp/><ref refid="classDepthControl_1a3db4274c7b5984e40b8da78ab70527e5" kindref="member">piston_position_</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="93" refid="classDepthControl_1a8d9d11c6820784b81e5bb939f9367065" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a8d9d11c6820784b81e5bb939f9367065" kindref="member">piston_switch_top_</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="94" refid="classDepthControl_1afce8cb443c18ca3e2e73e828f9755d05" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1afce8cb443c18ca3e2e73e828f9755d05" kindref="member">piston_switch_bottom_</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="95" refid="classDepthControl_1a3d16ab6fa6539288e826a4ff4a42862d" refkind="member"><highlight class="normal"><sp/><sp/>int32_t<sp/><ref refid="classDepthControl_1a3d16ab6fa6539288e826a4ff4a42862d" kindref="member">piston_state_</ref><sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="96" refid="classDepthControl_1a801df5bac2d9b3aa0b092738dff4fa4d" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a801df5bac2d9b3aa0b092738dff4fa4d" kindref="member">piston_set_point_</ref><sp/>=<sp/>0.;</highlight></codeline>
<codeline lineno="97" refid="classDepthControl_1ad865b28866049d5808b0da77d339e9a6" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1ad865b28866049d5808b0da77d339e9a6" kindref="member">is_exit_</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="98"><highlight class="normal"></highlight></codeline>
<codeline lineno="100" refid="classDepthControl_1a544336d8e93bf4f0595809df63796329" refkind="member"><highlight class="normal"><sp/><sp/>rclcpp::Time<sp/><ref refid="classDepthControl_1a544336d8e93bf4f0595809df63796329" kindref="member">time_last_kalman_callback_</ref><sp/>{};</highlight></codeline>
<codeline lineno="101" refid="classDepthControl_1a222f7fcde439d6d706121e5f48ebdce3" refkind="member"><highlight class="normal"><sp/><sp/>rclcpp::Time<sp/><ref refid="classDepthControl_1a222f7fcde439d6d706121e5f48ebdce3" kindref="member">time_last_piston_callback_</ref><sp/>{};</highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>[Velocity;<sp/>Depth;<sp/>Volume;<sp/>Offset,<sp/>chi,<sp/>chi2,<sp/>Cz]</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="104" refid="classDepthControl_1a0e327ec247f4841207cbce922e074f73" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a0e327ec247f4841207cbce922e074f73" kindref="member">kalman_velocity_</ref><sp/>=<sp/>0.;</highlight></codeline>
<codeline lineno="105" refid="classDepthControl_1a339094eaaa76ccb89252027f69f8213b" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a339094eaaa76ccb89252027f69f8213b" kindref="member">kalman_depth_</ref><sp/>=<sp/>0.;</highlight></codeline>
<codeline lineno="106" refid="classDepthControl_1a8f24eef83e0bdf458ae69234c2c0de49" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a8f24eef83e0bdf458ae69234c2c0de49" kindref="member">kalman_total_offset_</ref><sp/>=<sp/>100.e-6;</highlight></codeline>
<codeline lineno="107" refid="classDepthControl_1ac9afb26121da2cb326bf8e7b1ca5e5f0" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1ac9afb26121da2cb326bf8e7b1ca5e5f0" kindref="member">kalman_chi_</ref><sp/>=<sp/>0.;</highlight></codeline>
<codeline lineno="108" refid="classDepthControl_1aa364580ac5cd3ab8c72c78832e95a720" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1aa364580ac5cd3ab8c72c78832e95a720" kindref="member">kalman_chi2_</ref><sp/>=<sp/>0.;</highlight></codeline>
<codeline lineno="109" refid="classDepthControl_1a1f5131a1c31e5d086d9155e1f89240c0" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a1f5131a1c31e5d086d9155e1f89240c0" kindref="member">kalman_cz_</ref><sp/>=<sp/>3.;</highlight></codeline>
<codeline lineno="110" refid="classDepthControl_1ad559226bb22bb926841f2b917f41d288" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1ad559226bb22bb926841f2b917f41d288" kindref="member">piston_volume_</ref><sp/>=<sp/>0.;</highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight></codeline>
<codeline lineno="112" refid="classDepthControl_1aa61e76c569b2093004bbc981e33a5e9d" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1aa61e76c569b2093004bbc981e33a5e9d" kindref="member">depth_fusion_</ref><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="113" refid="classDepthControl_1a8a024f440da0eff3d5ae72ab47662623" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a8a024f440da0eff3d5ae72ab47662623" kindref="member">depth_set_point_</ref><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="114" refid="classDepthControl_1a7e9789482747830f9ac3b541539ba667" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a7e9789482747830f9ac3b541539ba667" kindref="member">limit_velocity_</ref><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="115" refid="classDepthControl_1af5f99e6f53622a8a8912b7de33b1ac1c" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1af5f99e6f53622a8a8912b7de33b1ac1c" kindref="member">limit_velocity_last_</ref><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="116" refid="classDepthControl_1a4c0506195d6e946fdf7c907815ccad0d" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a4c0506195d6e946fdf7c907815ccad0d" kindref="member">approach_velocity_</ref><sp/>=<sp/>1.0;</highlight></codeline>
<codeline lineno="117"><highlight class="normal"></highlight></codeline>
<codeline lineno="118" refid="classDepthControl_1a2a376cf8a29cdee741d00cc45784097f" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a2a376cf8a29cdee741d00cc45784097f" kindref="member">temperature_</ref><sp/>=<sp/>288.15;</highlight></codeline>
<codeline lineno="119" refid="classDepthControl_1a99b40b2e7248bd6def2efb6e0a3957b8" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a99b40b2e7248bd6def2efb6e0a3957b8" kindref="member">pressure_</ref><sp/>=<sp/>101325;</highlight></codeline>
<codeline lineno="120"><highlight class="normal"></highlight></codeline>
<codeline lineno="121" refid="classDepthControl_1a7006b0427c30dbcd88aa7e5a8703ac02" refkind="member"><highlight class="normal"><sp/><sp/>std::chrono::milliseconds<sp/><ref refid="classDepthControl_1a7006b0427c30dbcd88aa7e5a8703ac02" kindref="member">last_waypoint_max_delay_</ref><sp/>=<sp/>5s;</highlight></codeline>
<codeline lineno="122" refid="classDepthControl_1a05c6ef66ded390b4d9fc90c021f95430" refkind="member"><highlight class="normal"><sp/><sp/>rclcpp::Time<sp/><ref refid="classDepthControl_1a05c6ef66ded390b4d9fc90c021f95430" kindref="member">last_waypoint_time_</ref><sp/>{};</highlight></codeline>
<codeline lineno="123"><highlight class="normal"></highlight></codeline>
<codeline lineno="125" refid="classDepthControl_1aa4127b865173986676f7bade1c461410a9ab181ebf6d5d1293759ab6911cea3a5" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">enum</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1aa4127b865173986676f7bade1c461410" kindref="member">STATE_MACHINE</ref><sp/>{<ref refid="classDepthControl_1aa4127b865173986676f7bade1c461410a1e7b94218ff6f0840e5f24022e818847" kindref="member">STATE_SURFACE</ref>,<sp/><ref refid="classDepthControl_1aa4127b865173986676f7bade1c461410a59acb79a177140ede8280416e84c01f9" kindref="member">STATE_SINK</ref>,<sp/><ref refid="classDepthControl_1aa4127b865173986676f7bade1c461410a9ab181ebf6d5d1293759ab6911cea3a5" kindref="member">STATE_CONTROL</ref>,<sp/><ref refid="classDepthControl_1aa4127b865173986676f7bade1c461410a81e0ccaff81b4c47aae231cd86601ef6" kindref="member">STATE_PISTON_ISSUE</ref>,</highlight></codeline>
<codeline lineno="126" refid="classDepthControl_1aa4127b865173986676f7bade1c461410afafafc96ef1fab50dafdae907c409acb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classDepthControl_1aa4127b865173986676f7bade1c461410a5dd9595d163a47c82a66f4c6847da4e8" kindref="member">STATE_HOLD_DEPTH</ref>,<sp/><ref refid="classDepthControl_1aa4127b865173986676f7bade1c461410afafafc96ef1fab50dafdae907c409acb" kindref="member">STATE_COMPUTE_ALPHA</ref>,<sp/><ref refid="classDepthControl_1aa4127b865173986676f7bade1c461410a4adcfedab85471703dfb08eb9612c2d3" kindref="member">STATE_STOP</ref>};</highlight></codeline>
<codeline lineno="127" refid="classDepthControl_1a264b6de435ce7b0a051802afad3903c6" refkind="member"><highlight class="normal"><sp/><sp/><ref refid="classDepthControl_1aa4127b865173986676f7bade1c461410" kindref="member">STATE_MACHINE</ref><sp/><ref refid="classDepthControl_1a264b6de435ce7b0a051802afad3903c6" kindref="member">regulation_state_</ref><sp/>=<sp/><ref refid="classDepthControl_1aa4127b865173986676f7bade1c461410a1e7b94218ff6f0840e5f24022e818847" kindref="member">STATE_SURFACE</ref>;</highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight></codeline>
<codeline lineno="130" refid="classDepthControl_1ac42344eeda10d9c508e1ce7f818c872d" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1ac42344eeda10d9c508e1ce7f818c872d" kindref="member">y_debug_</ref><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="131" refid="classDepthControl_1af522038aba0a81df9aed4fa446b3e3f6" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1af522038aba0a81df9aed4fa446b3e3f6" kindref="member">dy_debug_</ref><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="132" refid="classDepthControl_1afcb3b799c7fbbc92d401e9b1836f5eff" refkind="member"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1afcb3b799c7fbbc92d401e9b1836f5eff" kindref="member">u_debug_</ref><sp/>=<sp/>0.0;</highlight></codeline>
<codeline lineno="133"><highlight class="normal"></highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight><highlight class="keyword">public</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a372e47e9230e163518a68d4ad5425fe2" kindref="member">update_state</ref>(</highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>&amp;<sp/>velocity,</highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>&amp;<sp/>depth,</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>&amp;<sp/>chi,</highlight></codeline>
<codeline lineno="151"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>&amp;<sp/>chi2,</highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>&amp;<sp/>cz,</highlight></codeline>
<codeline lineno="153"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>&amp;<sp/>offset_total,</highlight></codeline>
<codeline lineno="154"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>rclcpp::Time<sp/>&amp;<sp/>time_update);</highlight></codeline>
<codeline lineno="155"><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a7f6b69209cac7b85d932b7b8b7eb4934" kindref="member">update_piston</ref>(</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>&amp;<sp/>position,</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>&amp;<sp/>switch_top,</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>&amp;<sp/>switch_bottom,</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">int</highlight><highlight class="normal"><sp/>&amp;<sp/>state,</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>rclcpp::Time<sp/>&amp;<sp/>time_update);</highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a39c4c52aa8f83ed2df1c0c435194706c" kindref="member">update_depth</ref>(</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>&amp;<sp/>depth,</highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>&amp;<sp/>pressure);</highlight></codeline>
<codeline lineno="179"><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a59a30728a2b9c595f95c680aed1dcce7" kindref="member">update_safety</ref>(</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>&amp;<sp/>emergency,</highlight></codeline>
<codeline lineno="187"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>&amp;<sp/>limit_depth);</highlight></codeline>
<codeline lineno="188"><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a5dad07bebba8979720a499cce990d86b" kindref="member">update_waypoint</ref>(</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>&amp;<sp/>depth,</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>&amp;<sp/>limit_velocity,</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>rclcpp::Time<sp/>&amp;<sp/>time_update,</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>&amp;<sp/>enable_control);</highlight></codeline>
<codeline lineno="201"><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a32465b4c8135b6c8098e2a177ee319af" kindref="member">update_density</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>&amp;<sp/>density);</highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1ab70c0372dcb3096f4ce7a9861cf66e29" kindref="member">update_temperature</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">float</highlight><highlight class="normal"><sp/>&amp;<sp/>temperature);</highlight></codeline>
<codeline lineno="213"><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a2ad0870b8b131eb27a8ed821f640bfbc" kindref="member">compute_u</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>set_point,<sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>limit_velocity);</highlight></codeline>
<codeline lineno="221"><highlight class="normal"></highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a9f06b862197fc1d9edba534d9bf10ceb" kindref="member">optimize_u</ref>(std::array<sp/>&lt;<sp/>double,<sp/>4<sp/>&gt;<sp/>&amp;u_tab);</highlight></codeline>
<codeline lineno="227"><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1ae7f6a2a229fd4412209a2c99540fbea6" kindref="member">update_coeff</ref>();</highlight></codeline>
<codeline lineno="232"><highlight class="normal"></highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1ac4651652dc7c2a0d9dcf7d5765bfe67e" kindref="member">state_machine_step</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>rclcpp::Duration<sp/>&amp;<sp/>dt,<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>rclcpp::Time<sp/>&amp;<sp/>current_time);</highlight></codeline>
<codeline lineno="240"><highlight class="normal"></highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a243f24f6f62b11d575a06881d7a18c16" kindref="member">set_start_time</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>rclcpp::Time<sp/>&amp;<sp/>start_time);</highlight></codeline>
<codeline lineno="246"><highlight class="normal"></highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a3b07f56e22380852e88ca3cf6911a4d7" kindref="member">update_AB</ref>();</highlight></codeline>
<codeline lineno="251"><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1acb75181f01e2f3d3816d9c1ce98519d6" kindref="member">fz_computation</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>velocity)<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="253"><highlight class="normal"></highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/></highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/><ref refid="classDepthControl_1a3409274ce6627e6b6eb5fb453d4c8527" kindref="member">fz_derivative_computation</ref>(</highlight><highlight class="keywordtype">double</highlight><highlight class="normal"><sp/>velocity)<sp/></highlight><highlight class="keyword">const</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="255"><highlight class="normal">};</highlight></codeline>
<codeline lineno="256"><highlight class="normal"></highlight></codeline>
<codeline lineno="257"><highlight class="normal"></highlight></codeline>
<codeline lineno="258"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/><sp/></highlight><highlight class="comment">//<sp/>SEABOT2_DEPTH_CONTROL__DEPTH_CONTROL_H_</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="/home/tristanlf/seabot2/seabot2-ros/src/seabot2_control/seabot2_depth_control/include/seabot2_depth_control/depth_control.h"/>
  </compounddef>
</doxygen>
