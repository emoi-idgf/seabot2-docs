<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.8" xml:lang="en-US">
  <compounddef id="xbee_8py" kind="file" language="Python">
    <compoundname>xbee.py</compoundname>
    <innerclass refid="classxbee__driver_1_1xbee_1_1XbeeNode" prot="public">xbee_driver::xbee::XbeeNode</innerclass>
    <innernamespace refid="namespacexbee__driver">xbee_driver</innernamespace>
    <innernamespace refid="namespacexbee__driver_1_1xbee">xbee_driver::xbee</innernamespace>
    <innernamespace refid="namespacedigi_1_1xbee_1_1devices">digi::xbee::devices</innernamespace>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1" refid="namespacexbee__driver" refkind="compound"><highlight class="keyword">import</highlight><highlight class="normal"><sp/>rclpy</highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>rclpy.node<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Node</highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/><ref refid="namespacedigi_1_1xbee_1_1devices" kindref="compound">digi.xbee.devices</ref><sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>*</highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>socket</highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>math</highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>seabot2_msgs.msg<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>SafetyStatus2</highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>seabot2_msgs.msg<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Bme280Data</highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>seabot2_msgs.msg<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>PowerState</highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>seabot2_msgs.msg<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>GpsFix</highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>seabot2_msgs.msg<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>GnssPose</highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>seabot2_msgs.msg<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>DepthPose</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>seabot2_msgs.msg<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>MissionState</highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>seabot2_msgs.msg<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>XbeeMessageLogState</highlight></codeline>
<codeline lineno="15"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>seabot2_msgs.msg<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>XbeeMessageHeader</highlight></codeline>
<codeline lineno="16"><highlight class="normal"></highlight><highlight class="keyword">from</highlight><highlight class="normal"><sp/>geometry_msgs.msg<sp/></highlight><highlight class="keyword">import</highlight><highlight class="normal"><sp/>Twist</highlight></codeline>
<codeline lineno="17"><highlight class="normal"></highlight></codeline>
<codeline lineno="18" refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>val,<sp/>nb_bit,<sp/>start_bit,<sp/>value_min=None,<sp/>value_max=None,<sp/>flag_debug=False):</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>flag_debug:</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;------&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;val<sp/>init<sp/>=&quot;</highlight><highlight class="normal">,<sp/>val)</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>value_min<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>value_max<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scale<sp/>=<sp/>((1<sp/>&lt;&lt;<sp/>nb_bit)<sp/>-<sp/>1)<sp/>/<sp/>(value_max<sp/>-<sp/>value_min)</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>val<sp/>=<sp/>int(round((min(max(val,value_min),<sp/>value_max)<sp/>-<sp/>value_min)<sp/>*<sp/>scale))</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_min<sp/>=<sp/>0.0</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scale<sp/>=<sp/>1.0</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/>mask<sp/>=<sp/>((1<sp/>&lt;&lt;<sp/>nb_bit)<sp/>-<sp/>1)<sp/>&lt;&lt;<sp/>start_bit</highlight></codeline>
<codeline lineno="29"><highlight class="normal"><sp/><sp/><sp/><sp/>data<sp/>=<sp/>data<sp/>|<sp/>(mask<sp/>&amp;<sp/>(val<sp/>&lt;&lt;<sp/>start_bit))</highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>flag_debug:</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;val_min<sp/>=&quot;</highlight><highlight class="normal">,<sp/>value_min)</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;scale<sp/>=<sp/>&quot;</highlight><highlight class="normal">,<sp/>scale)</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;val<sp/>=<sp/>&quot;</highlight><highlight class="normal">,<sp/>val)</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>data,<sp/>nb_bit<sp/>+<sp/>start_bit,<sp/>val<sp/>/<sp/>scale<sp/>+<sp/>value_min</highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37" refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>nb_bit,<sp/>start_bit,<sp/>value_min=None,<sp/>value_max=None):</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/>mask<sp/>=<sp/>(1<sp/>&lt;&lt;<sp/>nb_bit)<sp/>-<sp/>1</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>data<sp/>is<sp/>byte<sp/>array,<sp/>convert<sp/>to<sp/>int</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/>v<sp/>=<sp/>(data<sp/>&gt;&gt;<sp/>start_bit)<sp/>&amp;<sp/>mask</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>value_min<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>value_max<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>scale<sp/>=<sp/>((1<sp/>&lt;&lt;<sp/>nb_bit)<sp/>-<sp/>1)<sp/>/<sp/>(value_max<sp/>-<sp/>value_min)</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>v<sp/>=<sp/>v<sp/>/<sp/>scale<sp/>+<sp/>value_min</highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>v,<sp/>start_bit<sp/>+<sp/>nb_bit</highlight></codeline>
<codeline lineno="45"><highlight class="normal"></highlight></codeline>
<codeline lineno="46" refid="classxbee__driver_1_1xbee_1_1XbeeNode" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">class<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode" kindref="compound">XbeeNode</ref>(Node):</highlight></codeline>
<codeline lineno="47"><highlight class="normal"></highlight></codeline>
<codeline lineno="48" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1acc893fd4d96bfe946086d6b19e8dd4ee" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1acc893fd4d96bfe946086d6b19e8dd4ee" kindref="member">__init__</ref>(self):</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>super().<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1acc893fd4d96bfe946086d6b19e8dd4ee" kindref="member">__init__</ref>(</highlight><highlight class="stringliteral">&apos;xbee_node&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Interfaces</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="52" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a4a94cc37b090b979406db70c51f810c5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a4a94cc37b090b979406db70c51f810c5" kindref="member">subscription_mission</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="53" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9a8e2b2a9fd8c634a778ce93ab6c35d1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9a8e2b2a9fd8c634a778ce93ab6c35d1" kindref="member">subscription_depth</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="54" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af5d7a8fa25573606ac1eb231d25d7a22" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af5d7a8fa25573606ac1eb231d25d7a22" kindref="member">subscription_mission_state</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="55" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a24c282a62e5179d7a01ac2ac91278697" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a24c282a62e5179d7a01ac2ac91278697" kindref="member">subscription_gnss_pose</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="56" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a3596deadfe895d80f0131890667e0e63" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a3596deadfe895d80f0131890667e0e63" kindref="member">subscription_gnss_data</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="57" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a6006de78561ce521e32b422211258d1c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a6006de78561ce521e32b422211258d1c" kindref="member">subscription_power_data</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="58" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aa06fd280b8cf50a925f1c54b343e4a27" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aa06fd280b8cf50a925f1c54b343e4a27" kindref="member">subscription_internal_sensor_filter</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="59" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af3ab381f82301cc6e79841b495b4a8fd" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af3ab381f82301cc6e79841b495b4a8fd" kindref="member">subscription_safety_data</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ab642d2516ae2783980fc1512090be6a5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ab642d2516ae2783980fc1512090be6a5" kindref="member">publisher_log_state</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Log<sp/>state<sp/>variables</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="63" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a79b88a3f3c9a844c88ba6451e51c9c02" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a79b88a3f3c9a844c88ba6451e51c9c02" kindref="member">safety_global_safety_valid</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="64" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ad39564fb30b822f36010129074bd180a" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ad39564fb30b822f36010129074bd180a" kindref="member">safety_published_frequency</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="65" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aab903957883c9d7e2c1ada16982c14b3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aab903957883c9d7e2c1ada16982c14b3" kindref="member">safety_depth_limit</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a2822e9eee910d6ffd424e02d5cae5a20" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a2822e9eee910d6ffd424e02d5cae5a20" kindref="member">safety_batteries_limit</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="67" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9c15928f0c91d1c49698c5415ece961b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9c15928f0c91d1c49698c5415ece961b" kindref="member">safety_depressurization</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="68" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afe93b00dfc56f15fba7e078ef46ed82e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afe93b00dfc56f15fba7e078ef46ed82e" kindref="member">safety_seafloor</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="69" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1facb042f39ec3b1dc83a1e7c2864d9b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1facb042f39ec3b1dc83a1e7c2864d9b" kindref="member">safety_piston</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="70" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a20c19d2383401ef1e8e186b009c8710e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a20c19d2383401ef1e8e186b009c8710e" kindref="member">safety_zero_depth</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"></highlight></codeline>
<codeline lineno="72" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a7b6291ebb05a3625da2b6c21fad73080" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a7b6291ebb05a3625da2b6c21fad73080" kindref="member">internal_pressure</ref><sp/>=<sp/>0.0</highlight></codeline>
<codeline lineno="73" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a58eeac31b5b28eb161788aceded33dc7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a58eeac31b5b28eb161788aceded33dc7" kindref="member">internal_temperature</ref><sp/>=<sp/>0.0</highlight></codeline>
<codeline lineno="74" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a37480048379f6acb2b2cf33a5972b503" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a37480048379f6acb2b2cf33a5972b503" kindref="member">internal_humidity</ref><sp/>=<sp/>0.0</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac680d838e83e713513a804776a50f80d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac680d838e83e713513a804776a50f80d" kindref="member">battery</ref><sp/>=<sp/>0.0</highlight></codeline>
<codeline lineno="77"><highlight class="normal"></highlight></codeline>
<codeline lineno="78" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a0dde0bc6e5038fa1dec68c8e58f43afe" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a0dde0bc6e5038fa1dec68c8e58f43afe" kindref="member">valid_fix</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="79" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aa7ca502f4cdd6e9f8a4c02d06a67505b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aa7ca502f4cdd6e9f8a4c02d06a67505b" kindref="member">fix_latitude</ref><sp/>=<sp/>0.0</highlight></codeline>
<codeline lineno="80" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a4e7c386a350947be23122972ac3532bf" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a4e7c386a350947be23122972ac3532bf" kindref="member">fix_longitude</ref><sp/>=<sp/>0.0</highlight></codeline>
<codeline lineno="81"><highlight class="normal"></highlight></codeline>
<codeline lineno="82" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5ba40bf2984ed0ed74d3ce6284309258" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5ba40bf2984ed0ed74d3ce6284309258" kindref="member">gnss_heading</ref><sp/>=<sp/>0.0</highlight></codeline>
<codeline lineno="83" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a7e8d62a14d6b9141872d5d164e131611" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a7e8d62a14d6b9141872d5d164e131611" kindref="member">gnss_speed</ref><sp/>=<sp/>0.0</highlight></codeline>
<codeline lineno="84" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac9cc429e980b3b1b867e4f66154524df" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac9cc429e980b3b1b867e4f66154524df" kindref="member">gnss_mean_east</ref><sp/>=<sp/>0.0</highlight></codeline>
<codeline lineno="85" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a516f7a9b1949eee422c60e5d7035c552" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a516f7a9b1949eee422c60e5d7035c552" kindref="member">gnss_mean_north</ref><sp/>=<sp/>0.0</highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight></codeline>
<codeline lineno="87" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a6defe024bbce00383f2f4fd47c4dab9d" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a6defe024bbce00383f2f4fd47c4dab9d" kindref="member">depth</ref><sp/>=<sp/>0.0</highlight></codeline>
<codeline lineno="88"><highlight class="normal"></highlight></codeline>
<codeline lineno="89" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a72df2d40c6ee619813d0e5dbf224f128" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a72df2d40c6ee619813d0e5dbf224f128" kindref="member">current_waypoint</ref><sp/>=<sp/>0</highlight></codeline>
<codeline lineno="90" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a4f6e14a31259d3a2f3252e57bdbd5035" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a4f6e14a31259d3a2f3252e57bdbd5035" kindref="member">mission_mode</ref><sp/>=<sp/>0</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Manual<sp/>control<sp/>variables</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a43deb0840ce3143e046de58c62eedd02" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a43deb0840ce3143e046de58c62eedd02" kindref="member">manual_remote</ref><sp/>=<sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">#<sp/>Remote<sp/>target<sp/>for<sp/>manual<sp/>commands</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Xbee<sp/>message<sp/>types</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5730c731958bfd87744fd66f514a95be" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5730c731958bfd87744fd66f514a95be" kindref="member">CMD_MSG_TYPE</ref><sp/>=<sp/>{</highlight><highlight class="stringliteral">&quot;LOG_STATE&quot;</highlight><highlight class="normal">:<sp/>0,<sp/></highlight><highlight class="stringliteral">&quot;CMD_SLEEP&quot;</highlight><highlight class="normal">:<sp/>1,<sp/></highlight><highlight class="stringliteral">&quot;CMD_PARAMETERS&quot;</highlight><highlight class="normal">:<sp/>2,<sp/></highlight><highlight class="stringliteral">&quot;CMD_MISSION_NEW&quot;</highlight><highlight class="normal">:<sp/>3,</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;CMD_MISSION_KEEP&quot;</highlight><highlight class="normal">:<sp/>4,<sp/></highlight><highlight class="stringliteral">&quot;THRUSTERS_CMD&quot;</highlight><highlight class="normal">:<sp/>5}</highlight></codeline>
<codeline lineno="98" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ab2504af7c3b135fddd01ef44e9293151" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ab2504af7c3b135fddd01ef44e9293151" kindref="member">last_cmd_received</ref><sp/>=<sp/>0</highlight></codeline>
<codeline lineno="99"><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Get<sp/>hostname<sp/>of<sp/>device</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="101" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac9e71aeee4e133b8a939bebaeb1db9e1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac9e71aeee4e133b8a939bebaeb1db9e1" kindref="member">hostname</ref><sp/>=<sp/>socket.gethostname()</highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>limit<sp/>size</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac9e71aeee4e133b8a939bebaeb1db9e1" kindref="member">hostname</ref><sp/>=<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac9e71aeee4e133b8a939bebaeb1db9e1" kindref="member">hostname</ref>[:20]<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>len(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac9e71aeee4e133b8a939bebaeb1db9e1" kindref="member">hostname</ref>)<sp/>&gt;=<sp/>21<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac9e71aeee4e133b8a939bebaeb1db9e1" kindref="member">hostname</ref></highlight></codeline>
<codeline lineno="104"><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Test<sp/>if<sp/>hostname<sp/>starts<sp/>with<sp/>&quot;seabot&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9fa16d4a86cfae38102a085936b6f222" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9fa16d4a86cfae38102a085936b6f222" kindref="member">hostname_is_seabot</ref><sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac9e71aeee4e133b8a939bebaeb1db9e1" kindref="member">hostname</ref>.startswith(</highlight><highlight class="stringliteral">&quot;seabot&quot;</highlight><highlight class="normal">):</highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9fa16d4a86cfae38102a085936b6f222" kindref="member">hostname_is_seabot</ref><sp/>=<sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;Hostname<sp/>:<sp/>&quot;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac9e71aeee4e133b8a939bebaeb1db9e1" kindref="member">hostname</ref>)</highlight></codeline>
<codeline lineno="110"><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Parameters</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a69c9bb39b06e0539f1e2558c4e9957e3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a69c9bb39b06e0539f1e2558c4e9957e3" kindref="member">xbee_network_id</ref><sp/>=<sp/>0x42</highlight></codeline>
<codeline lineno="113" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a2b5b4e65e5caa83c9d34d542394efe0c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a2b5b4e65e5caa83c9d34d542394efe0c" kindref="member">xbee_encryption_key</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;ABCDEFGHIFKLMNOP&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="114" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a56f9d42acfb693b4c443573416a886ce" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a56f9d42acfb693b4c443573416a886ce" kindref="member">xbee_node_id</ref><sp/>=<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac9e71aeee4e133b8a939bebaeb1db9e1" kindref="member">hostname</ref></highlight></codeline>
<codeline lineno="115" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a8467852f36c60ca9c968c97afad7e0a1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a8467852f36c60ca9c968c97afad7e0a1" kindref="member">time_between_communication</ref><sp/>=<sp/>5</highlight></codeline>
<codeline lineno="116" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae303ba77bf561085291bd2b986998bd7" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae303ba77bf561085291bd2b986998bd7" kindref="member">serial_baudrate</ref><sp/>=<sp/>9600</highlight></codeline>
<codeline lineno="117" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a06516d66972330ed5bc007aa701e7319" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a06516d66972330ed5bc007aa701e7319" kindref="member">tx_power</ref><sp/>=<sp/>4<sp/></highlight><highlight class="comment">#<sp/>0=2mW,<sp/>1=5mW,<sp/>2=10mW,<sp/>3=16mW,<sp/>4=32mW</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="118" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9296d0cc7a9f6846145deefae3dca551" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9296d0cc7a9f6846145deefae3dca551" kindref="member">routing_mode</ref><sp/>=<sp/>2<sp/></highlight><highlight class="comment">#<sp/>Non<sp/>routing<sp/>device</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="119" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9b6784a0fc0982d9446f2bc3029103db" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9b6784a0fc0982d9446f2bc3029103db" kindref="member">manual_remote_id</ref><sp/>=<sp/>-1<sp/><sp/></highlight><highlight class="comment">#<sp/>ID<sp/>of<sp/>the<sp/>remote<sp/>target<sp/>for<sp/>manual<sp/>commands,<sp/>-1<sp/>means<sp/>no<sp/>target,<sp/>0<sp/>means<sp/>broadcast</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="120" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a66cfcc1f9528b07c6fe772cb954593e5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a66cfcc1f9528b07c6fe772cb954593e5" kindref="member">manual_heading_control</ref><sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"><sp/><sp/></highlight><highlight class="comment">#<sp/>If<sp/>True,<sp/>the<sp/>manual<sp/>command<sp/>will<sp/>be<sp/>sent<sp/>to<sp/>the<sp/>cmd_vel_heading<sp/>topic<sp/>and<sp/>heading<sp/>regulation<sp/>will<sp/>be<sp/>used,<sp/>otherwise<sp/>raw<sp/>commands<sp/>will<sp/>be<sp/>sent<sp/>to<sp/>cmd_vel</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="122"><highlight class="normal"></highlight></codeline>
<codeline lineno="123" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af22d83142a7377450010a0281cfdd84e" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af22d83142a7377450010a0281cfdd84e" kindref="member">serial_port</ref><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;/dev/ttyMAX0&quot;</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9fa16d4a86cfae38102a085936b6f222" kindref="member">hostname_is_seabot</ref><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;/dev/ttyUSB0&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Initialization</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a032f919b94d68a4197c56b0edf52463b" kindref="member">init_interfaces</ref>()</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a407959de48e218021b9a4ef516a92a41" kindref="member">init_parameters</ref>()</highlight></codeline>
<codeline lineno="128"><highlight class="normal"></highlight></codeline>
<codeline lineno="129" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a13f290fd313e2d5ca7047c202a7495a1" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a13f290fd313e2d5ca7047c202a7495a1" kindref="member">timer</ref><sp/>=<sp/>self.create_timer(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a8467852f36c60ca9c968c97afad7e0a1" kindref="member">time_between_communication</ref>,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1abae28f4326dd8626be8474490722ff98" kindref="member">timer_callback</ref>)</highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Connect<sp/>to<sp/>xbee</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>https://xbplib.readthedocs.io/en/latest/index.html</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="133" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref><sp/>=<sp/>XBeeDevice(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af22d83142a7377450010a0281cfdd84e" kindref="member">serial_port</ref>,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae303ba77bf561085291bd2b986998bd7" kindref="member">serial_baudrate</ref>)</highlight></codeline>
<codeline lineno="134"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.open()</highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae82a2e76050d229727ee8f15a7e06add" kindref="member">configure_xbee</ref>()</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight></codeline>
<codeline lineno="138" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afde573e979e506ba4e175e6277797898" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afde573e979e506ba4e175e6277797898" kindref="member">xnet</ref>=self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.get_network()</highlight></codeline>
<codeline lineno="139"><highlight class="normal"></highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9fa16d4a86cfae38102a085936b6f222" kindref="member">hostname_is_seabot</ref>:</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Start<sp/>the<sp/>discovery<sp/>process<sp/>and<sp/>wait<sp/>for<sp/>it<sp/>to<sp/>be<sp/>over.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="142"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afde573e979e506ba4e175e6277797898" kindref="member">xnet</ref>.set_discovery_options({DiscoveryOptions.DISCOVER_MYSELF})</highlight></codeline>
<codeline lineno="143"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afde573e979e506ba4e175e6277797898" kindref="member">xnet</ref>.set_discovery_timeout(5)<sp/><sp/></highlight><highlight class="comment">#<sp/>seconds</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"></highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Add<sp/>the<sp/>device<sp/>discovered<sp/>callback.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="146" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aaa9c3aaf7583775033c51d70bb5ce5d6" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afde573e979e506ba4e175e6277797898" kindref="member">xnet</ref>.add_discovery_process_finished_callback(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aaa9c3aaf7583775033c51d70bb5ce5d6" kindref="member">xnet_discovery_callback</ref><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1abd1ba3899ded0d6eb056597df5051d17" kindref="member">xnet_discovery_callback</ref>)</highlight></codeline>
<codeline lineno="147"><highlight class="normal"></highlight></codeline>
<codeline lineno="148"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Start<sp/>the<sp/>discovery<sp/>process.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afde573e979e506ba4e175e6277797898" kindref="member">xnet</ref>.start_discovery_process()</highlight></codeline>
<codeline lineno="150"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(</highlight><highlight class="stringliteral">&quot;Starting<sp/>the<sp/>discovery<sp/>process...&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>print(</highlight><highlight class="stringliteral">&quot;Xbee<sp/>Adress:<sp/>&quot;</highlight><highlight class="normal">,self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.get_64bit_addr())</highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight></codeline>
<codeline lineno="154" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a29168293f77cc2e4a44bcc1b7955166f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a29168293f77cc2e4a44bcc1b7955166f" kindref="member">__del__</ref>(self):</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.close()</highlight></codeline>
<codeline lineno="156"><highlight class="normal"></highlight></codeline>
<codeline lineno="157" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae82a2e76050d229727ee8f15a7e06add" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae82a2e76050d229727ee8f15a7e06add" kindref="member">configure_xbee</ref>(self):</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.read_device_info()</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.set_node_id(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a56f9d42acfb693b4c443573416a886ce" kindref="member">xbee_node_id</ref>)</highlight></codeline>
<codeline lineno="160"><highlight class="normal"></highlight></codeline>
<codeline lineno="161"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Disable<sp/>apply<sp/>changes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>This<sp/>is<sp/>needed<sp/>to<sp/>set<sp/>the<sp/>parameters<sp/>without<sp/>applying<sp/>them<sp/>immediately<sp/>and<sp/>applying<sp/>them<sp/>all<sp/>at<sp/>once<sp/>at<sp/>the<sp/>end.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.is_apply_changes_enabled:</highlight></codeline>
<codeline lineno="164"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.enable_apply_changes(</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="165"><highlight class="normal"></highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(f</highlight><highlight class="stringliteral">&apos;Set<sp/>network<sp/>ID<sp/>{self.xbee_network_id}&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.set_parameter(</highlight><highlight class="stringliteral">&apos;ID&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a69c9bb39b06e0539f1e2558c4e9957e3" kindref="member">xbee_network_id</ref>.to_bytes(2,<sp/></highlight><highlight class="stringliteral">&apos;big&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="170"><highlight class="normal"></highlight></codeline>
<codeline lineno="171"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Set<sp/>encryption<sp/>key</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(f</highlight><highlight class="stringliteral">&apos;Set<sp/>encryption<sp/>key<sp/>{self.xbee_encryption_key}&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="173"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.set_parameter(</highlight><highlight class="stringliteral">&apos;KY&apos;</highlight><highlight class="normal">,<sp/>bytearray(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a2b5b4e65e5caa83c9d34d542394efe0c" kindref="member">xbee_encryption_key</ref>,<sp/></highlight><highlight class="stringliteral">&apos;utf-8&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Set<sp/>encryption<sp/>enable</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(</highlight><highlight class="stringliteral">&apos;Enable<sp/>Encryption&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.set_parameter(</highlight><highlight class="stringliteral">&apos;EE&apos;</highlight><highlight class="normal">,<sp/>b</highlight><highlight class="stringliteral">&apos;\x01&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="178"><highlight class="normal"></highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>TX<sp/>Power<sp/>Level</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(f</highlight><highlight class="stringliteral">&apos;Set<sp/>TX<sp/>power<sp/>level<sp/>=<sp/>{self.tx_power}&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.set_parameter(</highlight><highlight class="stringliteral">&apos;PL&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a06516d66972330ed5bc007aa701e7319" kindref="member">tx_power</ref>.to_bytes(2,<sp/></highlight><highlight class="stringliteral">&apos;big&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="185"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(f</highlight><highlight class="stringliteral">&apos;Set<sp/>Routing<sp/>node<sp/>({self.routing_mode})&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="186"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.set_parameter(</highlight><highlight class="stringliteral">&apos;CE&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9296d0cc7a9f6846145deefae3dca551" kindref="member">routing_mode</ref>.to_bytes(2,<sp/></highlight><highlight class="stringliteral">&apos;big&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="187"><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Apply<sp/>changes.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(</highlight><highlight class="stringliteral">&apos;Apply<sp/>changes<sp/>&amp;<sp/>write&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="190"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.apply_changes()</highlight></codeline>
<codeline lineno="191"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Write<sp/>changes<sp/>(to<sp/>flash).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="192"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.write_changes()</highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight></codeline>
<codeline lineno="194" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac3b4570b997e3c55e48411bacdb49344" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.add_data_received_callback(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac3b4570b997e3c55e48411bacdb49344" kindref="member">data_received_callback</ref><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aee2f03a2aa0b667783cd420acf4d01ac" kindref="member">data_received_callback</ref>)</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="196" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1abd1ba3899ded0d6eb056597df5051d17" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aaa9c3aaf7583775033c51d70bb5ce5d6" kindref="member">xnet_discovery_callback</ref>(self,<sp/>status):</highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>status<sp/>==<sp/>NetworkDiscoveryStatus.ERROR_READ_TIMEOUT:</highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().error(</highlight><highlight class="stringliteral">&quot;Read<sp/>timeout<sp/>error&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="199"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>status<sp/>==<sp/>NetworkDiscoveryStatus.ERROR_NET_DISCOVER:</highlight></codeline>
<codeline lineno="200"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().error(</highlight><highlight class="stringliteral">&quot;Error<sp/>executing<sp/>node<sp/>discovery&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>status<sp/>==<sp/>NetworkDiscoveryStatus.ERROR_GENERAL:</highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().error(</highlight><highlight class="stringliteral">&quot;Error<sp/>while<sp/>discovering<sp/>network&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>status<sp/>==<sp/>NetworkDiscoveryStatus.CANCEL:</highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(</highlight><highlight class="stringliteral">&quot;Discovery<sp/>process<sp/>cancelled&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>status<sp/>==<sp/>NetworkDiscoveryStatus.SUCCESS:</highlight></codeline>
<codeline lineno="206"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(</highlight><highlight class="stringliteral">&quot;Discovery<sp/>process<sp/>finished<sp/>successfully&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>nodes=self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afde573e979e506ba4e175e6277797898" kindref="member">xnet</ref>.get_devices()</highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(f</highlight><highlight class="stringliteral">&quot;Found<sp/>{len(nodes)}<sp/>nodes<sp/>in<sp/>the<sp/>network<sp/>:&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>node<sp/></highlight><highlight class="keywordflow">in</highlight><highlight class="normal"><sp/>nodes:</highlight></codeline>
<codeline lineno="211"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(f</highlight><highlight class="stringliteral">&quot;Node:<sp/>{node.get_node_id()},<sp/>Address:<sp/>{node.get_64bit_addr()}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="212"><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9b6784a0fc0982d9446f2bc3029103db" kindref="member">manual_remote_id</ref><sp/>&gt;<sp/>0:</highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a43deb0840ce3143e046de58c62eedd02" kindref="member">manual_remote</ref>=self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afde573e979e506ba4e175e6277797898" kindref="member">xnet</ref>.get_device_by_node_id(</highlight><highlight class="stringliteral">&quot;seabot&quot;</highlight><highlight class="normal">+str(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9b6784a0fc0982d9446f2bc3029103db" kindref="member">manual_remote_id</ref>))</highlight></codeline>
<codeline lineno="215"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a43deb0840ce3143e046de58c62eedd02" kindref="member">manual_remote</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().error(f</highlight><highlight class="stringliteral">&quot;Remote<sp/>target<sp/>with<sp/>node<sp/>ID<sp/>&apos;seabot{self.manual_remote_id}&apos;<sp/>not<sp/>found,<sp/>cannot<sp/>send<sp/>manual<sp/>command&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="217"><highlight class="normal"></highlight></codeline>
<codeline lineno="218"><highlight class="normal"></highlight></codeline>
<codeline lineno="219" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aee2f03a2aa0b667783cd420acf4d01ac" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac3b4570b997e3c55e48411bacdb49344" kindref="member">data_received_callback</ref>(self,<sp/>xbee_message):</highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>ToDo<sp/>:<sp/>process<sp/>the<sp/>callback</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node_address<sp/>=<sp/>xbee_message.remote_device.get_64bit_addr()</highlight></codeline>
<codeline lineno="222"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>node_name<sp/>=<sp/>xbee_message.remote_device.get_node_id()</highlight></codeline>
<codeline lineno="223"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>node_name<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="224"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(f</highlight><highlight class="stringliteral">&quot;Received<sp/>data<sp/>from<sp/>unknown<sp/>node<sp/>with<sp/>address<sp/>{node_address}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="225"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afde573e979e506ba4e175e6277797898" kindref="member">xnet</ref>.is_discovery_running():</highlight></codeline>
<codeline lineno="226"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afde573e979e506ba4e175e6277797898" kindref="member">xnet</ref>.start_discovery_process()<sp/><sp/></highlight><highlight class="comment">#<sp/>restart<sp/>discovery<sp/>process<sp/>to<sp/>get<sp/>the<sp/>name<sp/>of<sp/>the<sp/>node</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="227"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(</highlight><highlight class="stringliteral">&quot;Restarting<sp/>discovery<sp/>process<sp/>to<sp/>get<sp/>the<sp/>name<sp/>of<sp/>the<sp/>node&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="228"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_timestamp<sp/>=<sp/>xbee_message.timestamp</highlight></codeline>
<codeline lineno="229"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_is_broadcast<sp/>=<sp/>xbee_message.is_broadcast</highlight></codeline>
<codeline lineno="230"><highlight class="normal"></highlight></codeline>
<codeline lineno="231"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Test<sp/>if<sp/>size<sp/>of<sp/>a<sp/>message<sp/>is<sp/>correct</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="232"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>1<sp/>&lt;<sp/>len(xbee_message.data)<sp/>&lt;<sp/>20:</highlight></codeline>
<codeline lineno="233"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>int.from_bytes(xbee_message.data,<sp/>byteorder=</highlight><highlight class="stringliteral">&apos;little&apos;</highlight><highlight class="normal">)<sp/></highlight><highlight class="comment">#<sp/>test<sp/>if<sp/>little<sp/>or<sp/>big<sp/>endian</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="234"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_type<sp/>=<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a76ff362ef2c2944e3cde71a7a49097da" kindref="member">deserialize_log_type</ref>(data)</highlight></codeline>
<codeline lineno="235"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>message_type<sp/>==<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5730c731958bfd87744fd66f514a95be" kindref="member">CMD_MSG_TYPE</ref>[</highlight><highlight class="stringliteral">&quot;LOG_STATE&quot;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="236"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_decoded<sp/>=<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5c4a914a898b9d544f3c3a9d54995649" kindref="member">deserialize_log_state</ref>(data)</highlight></codeline>
<codeline lineno="237"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9fa16d4a86cfae38102a085936b6f222" kindref="member">hostname_is_seabot</ref>:</highlight></codeline>
<codeline lineno="238"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(f</highlight><highlight class="stringliteral">&apos;Received<sp/>data<sp/>from<sp/>{node_name}<sp/>({node_address})\n<sp/>{data_decoded}&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="239"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state<sp/>=<sp/>XbeeMessageLogState()</highlight></codeline>
<codeline lineno="240"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.xbee_header<sp/>=<sp/>XbeeMessageHeader()</highlight></codeline>
<codeline lineno="241"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.xbee_header.xbee_address<sp/>=<sp/>int.from_bytes(node_address,<sp/>byteorder=</highlight><highlight class="stringliteral">&apos;big&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="242"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.xbee_header.node_name<sp/>=<sp/>node_name<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>node_name<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="stringliteral">&quot;&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="243"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.xbee_header.is_broadcast<sp/>=<sp/>message_is_broadcast</highlight></codeline>
<codeline lineno="244"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.xbee_header.message_type<sp/>=<sp/>message_type</highlight></codeline>
<codeline lineno="245"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.safety_global_safety_valid<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;global_safety_valid&quot;</highlight><highlight class="normal">]<sp/>==<sp/>1<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="246"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.safety_published_frequency<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;published_frequency&quot;</highlight><highlight class="normal">]<sp/>==<sp/>1<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="247"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.safety_depth_limit<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;depth_limit&quot;</highlight><highlight class="normal">]<sp/>==<sp/>1<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="248"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.safety_batteries_limit<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;batteries_limit&quot;</highlight><highlight class="normal">]<sp/>==<sp/>1<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="249"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.safety_depressurization<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;depressurization&quot;</highlight><highlight class="normal">]<sp/>==<sp/>1<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="250"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.safety_seafloor<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;seafloor&quot;</highlight><highlight class="normal">]<sp/>==<sp/>1<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="251"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.safety_piston<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;piston&quot;</highlight><highlight class="normal">]<sp/>==<sp/>1<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="252"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.safety_zero_depth<sp/>=<sp/></highlight><highlight class="keyword">True</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;zero_depth&quot;</highlight><highlight class="normal">]<sp/>==<sp/>1<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">False</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="253"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.fix_latitude<sp/>=<sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;latitude&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="254"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.fix_longitude<sp/>=<sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;longitude&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="255"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.gnss_speed<sp/>=<sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;speed&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="256"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.gnss_heading<sp/>=<sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;heading&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="257"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.battery<sp/>=<sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;battery&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="258"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.internal_pressure<sp/>=<sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;pressure&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="259"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.internal_temperature<sp/>=<sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;temperature&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="260"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.internal_humidity<sp/>=<sp/>int(data_decoded[</highlight><highlight class="stringliteral">&quot;humidity&quot;</highlight><highlight class="normal">])</highlight></codeline>
<codeline lineno="261"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.current_waypoint<sp/>=<sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;waypoint&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="262"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_log_state.last_cmd_received<sp/>=<sp/>data_decoded[</highlight><highlight class="stringliteral">&quot;last_cmd_received&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="263"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ab642d2516ae2783980fc1512090be6a5" kindref="member">publisher_log_state</ref>.publish(message_log_state)</highlight></codeline>
<codeline lineno="264"><highlight class="normal"></highlight></codeline>
<codeline lineno="265"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">elif</highlight><highlight class="normal"><sp/>message_type<sp/>==<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5730c731958bfd87744fd66f514a95be" kindref="member">CMD_MSG_TYPE</ref>[</highlight><highlight class="stringliteral">&quot;THRUSTERS_CMD&quot;</highlight><highlight class="normal">]:</highlight></codeline>
<codeline lineno="266"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9fa16d4a86cfae38102a085936b6f222" kindref="member">hostname_is_seabot</ref>:</highlight></codeline>
<codeline lineno="267"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bit_position<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="268"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_type,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>4,<sp/>bit_position)</highlight></codeline>
<codeline lineno="269"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>linear_x,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>8,<sp/>bit_position)</highlight></codeline>
<codeline lineno="270"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>angular_z,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>8,<sp/>bit_position)</highlight></codeline>
<codeline lineno="271"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg<sp/>=<sp/>Twist()</highlight></codeline>
<codeline lineno="272"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.linear.x<sp/>=<sp/>float(linear_x)/100.-1</highlight></codeline>
<codeline lineno="273"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>msg.angular.z<sp/>=<sp/>float(angular_z)/100.-1</highlight></codeline>
<codeline lineno="274"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af8176a0be97dc0761cdb07e6a6a11c55" kindref="member">publisher_manual_velocity</ref>.publish(msg)</highlight></codeline>
<codeline lineno="275"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(f</highlight><highlight class="stringliteral">&apos;Received<sp/>manual<sp/>command<sp/>from<sp/>{node_name}<sp/>({node_address})\n&apos;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="276"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>f</highlight><highlight class="stringliteral">&apos;linear_x={msg.linear.x},<sp/>angular_z={msg.angular.z}&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="277"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="278"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(f</highlight><highlight class="stringliteral">&apos;Received<sp/>manual<sp/>command<sp/>from<sp/>{node_name}<sp/>({node_address}),<sp/>but<sp/>not<sp/>a<sp/>seabot,<sp/>ignoring&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="279"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="280"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(f</highlight><highlight class="stringliteral">&apos;Received<sp/>unknown<sp/>message<sp/>{node_name}<sp/>({node_address})&apos;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="281"><highlight class="normal"></highlight></codeline>
<codeline lineno="282" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a407959de48e218021b9a4ef516a92a41" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a407959de48e218021b9a4ef516a92a41" kindref="member">init_parameters</ref>(self):</highlight></codeline>
<codeline lineno="283"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.declare_parameter(</highlight><highlight class="stringliteral">&apos;serial_port&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af22d83142a7377450010a0281cfdd84e" kindref="member">serial_port</ref>)</highlight></codeline>
<codeline lineno="284"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.declare_parameter(</highlight><highlight class="stringliteral">&apos;serial_baudrate&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae303ba77bf561085291bd2b986998bd7" kindref="member">serial_baudrate</ref>)</highlight></codeline>
<codeline lineno="285"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.declare_parameter(</highlight><highlight class="stringliteral">&apos;xbee_node_id&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a56f9d42acfb693b4c443573416a886ce" kindref="member">xbee_node_id</ref>)</highlight></codeline>
<codeline lineno="286"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.declare_parameter(</highlight><highlight class="stringliteral">&apos;time_between_communication&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a8467852f36c60ca9c968c97afad7e0a1" kindref="member">time_between_communication</ref>)<sp/><sp/></highlight><highlight class="comment">#<sp/>in<sp/>seconds</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="287"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.declare_parameter(</highlight><highlight class="stringliteral">&apos;xbee_encryption_key&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a2b5b4e65e5caa83c9d34d542394efe0c" kindref="member">xbee_encryption_key</ref>)<sp/><sp/></highlight><highlight class="comment">#<sp/>16<sp/>bytes</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="288"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.declare_parameter(</highlight><highlight class="stringliteral">&apos;xbee_network_id&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a69c9bb39b06e0539f1e2558c4e9957e3" kindref="member">xbee_network_id</ref>)<sp/><sp/></highlight><highlight class="comment">#<sp/>between<sp/>0x0<sp/>and<sp/>0x7FFF</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="289"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.declare_parameter(</highlight><highlight class="stringliteral">&apos;tx_power&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a06516d66972330ed5bc007aa701e7319" kindref="member">tx_power</ref>)</highlight></codeline>
<codeline lineno="290"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.declare_parameter(</highlight><highlight class="stringliteral">&apos;routing_mode&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9296d0cc7a9f6846145deefae3dca551" kindref="member">routing_mode</ref>)</highlight></codeline>
<codeline lineno="291"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.declare_parameter(</highlight><highlight class="stringliteral">&apos;manual_remote_id&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9b6784a0fc0982d9446f2bc3029103db" kindref="member">manual_remote_id</ref>)<sp/><sp/></highlight><highlight class="comment">#<sp/>ID<sp/>of<sp/>the<sp/>remote<sp/>target<sp/>for<sp/>manual<sp/>commands</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="292"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.declare_parameter(</highlight><highlight class="stringliteral">&apos;manual_heading_control&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a66cfcc1f9528b07c6fe772cb954593e5" kindref="member">manual_heading_control</ref>)</highlight></codeline>
<codeline lineno="293"><highlight class="normal"></highlight></codeline>
<codeline lineno="294"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af22d83142a7377450010a0281cfdd84e" kindref="member">serial_port</ref><sp/>=<sp/>self.get_parameter(</highlight><highlight class="stringliteral">&apos;serial_port&apos;</highlight><highlight class="normal">).get_parameter_value().string_value</highlight></codeline>
<codeline lineno="295"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae303ba77bf561085291bd2b986998bd7" kindref="member">serial_baudrate</ref><sp/>=<sp/>self.get_parameter(</highlight><highlight class="stringliteral">&apos;serial_baudrate&apos;</highlight><highlight class="normal">).get_parameter_value().integer_value</highlight></codeline>
<codeline lineno="296"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a8467852f36c60ca9c968c97afad7e0a1" kindref="member">time_between_communication</ref><sp/>=<sp/>self.get_parameter(</highlight></codeline>
<codeline lineno="297"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;time_between_communication&apos;</highlight><highlight class="normal">).get_parameter_value().integer_value</highlight></codeline>
<codeline lineno="298"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a56f9d42acfb693b4c443573416a886ce" kindref="member">xbee_node_id</ref><sp/>=<sp/>self.get_parameter(</highlight><highlight class="stringliteral">&apos;xbee_node_id&apos;</highlight><highlight class="normal">).get_parameter_value().string_value</highlight></codeline>
<codeline lineno="299"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a2b5b4e65e5caa83c9d34d542394efe0c" kindref="member">xbee_encryption_key</ref><sp/>=<sp/>self.get_parameter(</highlight><highlight class="stringliteral">&apos;xbee_encryption_key&apos;</highlight><highlight class="normal">).get_parameter_value().string_value</highlight></codeline>
<codeline lineno="300"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a69c9bb39b06e0539f1e2558c4e9957e3" kindref="member">xbee_network_id</ref><sp/>=<sp/>self.get_parameter(</highlight><highlight class="stringliteral">&apos;xbee_network_id&apos;</highlight><highlight class="normal">).get_parameter_value().integer_value</highlight></codeline>
<codeline lineno="301"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a06516d66972330ed5bc007aa701e7319" kindref="member">tx_power</ref><sp/>=<sp/>self.get_parameter(</highlight><highlight class="stringliteral">&apos;tx_power&apos;</highlight><highlight class="normal">).get_parameter_value().integer_value</highlight></codeline>
<codeline lineno="302"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9296d0cc7a9f6846145deefae3dca551" kindref="member">routing_mode</ref><sp/>=<sp/>self.get_parameter(</highlight><highlight class="stringliteral">&apos;routing_mode&apos;</highlight><highlight class="normal">).get_parameter_value().integer_value</highlight></codeline>
<codeline lineno="303"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9b6784a0fc0982d9446f2bc3029103db" kindref="member">manual_remote_id</ref><sp/>=<sp/>self.get_parameter(</highlight><highlight class="stringliteral">&apos;manual_remote_id&apos;</highlight><highlight class="normal">).get_parameter_value().integer_value</highlight></codeline>
<codeline lineno="304"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a66cfcc1f9528b07c6fe772cb954593e5" kindref="member">manual_heading_control</ref><sp/>=<sp/>self.get_parameter(</highlight><highlight class="stringliteral">&apos;manual_heading_control&apos;</highlight><highlight class="normal">).get_parameter_value().bool_value</highlight></codeline>
<codeline lineno="305"><highlight class="normal"></highlight></codeline>
<codeline lineno="306" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a032f919b94d68a4197c56b0edf52463b" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a032f919b94d68a4197c56b0edf52463b" kindref="member">init_interfaces</ref>(self):</highlight></codeline>
<codeline lineno="307"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af3ab381f82301cc6e79841b495b4a8fd" kindref="member">subscription_safety_data</ref><sp/>=<sp/>self.create_subscription(SafetyStatus2,</highlight></codeline>
<codeline lineno="308" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a190b68c9c4655abfbd5a990a54dc3273" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;/safety/safety&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a190b68c9c4655abfbd5a990a54dc3273" kindref="member">safety_callback</ref><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac70f0eb09aa2cf2dd554b84baba76604" kindref="member">safety_callback</ref>,<sp/>10)</highlight></codeline>
<codeline lineno="309"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aa06fd280b8cf50a925f1c54b343e4a27" kindref="member">subscription_internal_sensor_filter</ref><sp/>=<sp/>self.create_subscription(Bme280Data,<sp/></highlight><highlight class="stringliteral">&apos;/observer/pressure_internal&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="310" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a811fe7bcaa2d9c688613a92ec92de0ef" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a811fe7bcaa2d9c688613a92ec92de0ef" kindref="member">internal_sensor_callback</ref><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac7bce8571d6e8afc7dcaa00487a6ab0c" kindref="member">internal_sensor_callback</ref>,<sp/>10)</highlight></codeline>
<codeline lineno="311"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a6006de78561ce521e32b422211258d1c" kindref="member">subscription_power_data</ref><sp/>=<sp/>self.create_subscription(PowerState,<sp/></highlight><highlight class="stringliteral">&apos;/observer/power&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5f35de27b29e5ba4781bf50512dbdf8c" kindref="member">power_callback</ref>,<sp/>10)</highlight></codeline>
<codeline lineno="312"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a3596deadfe895d80f0131890667e0e63" kindref="member">subscription_gnss_data</ref><sp/>=<sp/>self.create_subscription(GpsFix,<sp/></highlight><highlight class="stringliteral">&apos;/driver/fix&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a4dee4110e751f08ad26c08f9f2840406" kindref="member">gpsd_callback</ref>,<sp/>10)</highlight></codeline>
<codeline lineno="313"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a24c282a62e5179d7a01ac2ac91278697" kindref="member">subscription_gnss_pose</ref><sp/>=<sp/>self.create_subscription(GnssPose,</highlight></codeline>
<codeline lineno="314" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5d9b14e1ff03ffb06e99fabc107e9f04" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&apos;/observer/pose_mean&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5d9b14e1ff03ffb06e99fabc107e9f04" kindref="member">gnss_pose_callback</ref><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a6cf035376f481b8cce732af1649cdb35" kindref="member">gnss_pose_callback</ref>,<sp/>10)</highlight></codeline>
<codeline lineno="315"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9a8e2b2a9fd8c634a778ce93ab6c35d1" kindref="member">subscription_depth</ref><sp/>=<sp/>self.create_subscription(DepthPose,<sp/></highlight><highlight class="stringliteral">&apos;/observer/depth&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a3e7996ed3cf1da869306084a8a9cccc2" kindref="member">depth_callback</ref>,<sp/>10)</highlight></codeline>
<codeline lineno="316"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af5d7a8fa25573606ac1eb231d25d7a22" kindref="member">subscription_mission_state</ref><sp/>=<sp/>self.create_subscription(MissionState,<sp/></highlight><highlight class="stringliteral">&apos;/mission/mission_state&apos;</highlight><highlight class="normal">,</highlight></codeline>
<codeline lineno="317" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a208d3bb159d5a3314559a887a56be95f" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a208d3bb159d5a3314559a887a56be95f" kindref="member">mission_callback</ref><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae1e96278546d7ddac988ddd05a729045" kindref="member">mission_callback</ref>,<sp/>10)</highlight></codeline>
<codeline lineno="318"><highlight class="normal"></highlight></codeline>
<codeline lineno="319"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ab642d2516ae2783980fc1512090be6a5" kindref="member">publisher_log_state</ref><sp/>=<sp/>self.create_publisher(XbeeMessageLogState,<sp/></highlight><highlight class="stringliteral">&apos;/com/xbee/log_state&apos;</highlight><highlight class="normal">,<sp/>10)</highlight></codeline>
<codeline lineno="320"><highlight class="normal"></highlight></codeline>
<codeline lineno="321"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9fa16d4a86cfae38102a085936b6f222" kindref="member">hostname_is_seabot</ref>:</highlight></codeline>
<codeline lineno="322"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a66cfcc1f9528b07c6fe772cb954593e5" kindref="member">manual_heading_control</ref>:</highlight></codeline>
<codeline lineno="323" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af8176a0be97dc0761cdb07e6a6a11c55" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af8176a0be97dc0761cdb07e6a6a11c55" kindref="member">publisher_manual_velocity</ref><sp/>=<sp/>self.create_publisher(Twist,<sp/></highlight><highlight class="stringliteral">&apos;cmd_vel_heading&apos;</highlight><highlight class="normal">,<sp/>10)</highlight></codeline>
<codeline lineno="324"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(</highlight><highlight class="stringliteral">&quot;[Manual<sp/>heading<sp/>control<sp/>enabled,<sp/>publishing<sp/>to<sp/>cmd_vel_heading&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="325"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="326"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="327"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1af8176a0be97dc0761cdb07e6a6a11c55" kindref="member">publisher_manual_velocity</ref><sp/>=<sp/>self.create_publisher(Twist,<sp/></highlight><highlight class="stringliteral">&apos;/cmd_vel&apos;</highlight><highlight class="normal">,<sp/>10)</highlight></codeline>
<codeline lineno="328"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(</highlight><highlight class="stringliteral">&quot;Manual<sp/>heading<sp/>control<sp/>disabled,<sp/>publishing<sp/>to<sp/>/cmd_vel&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="329"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="330"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="331" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae1686eac6515f8652c91dc0353bba424" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae1686eac6515f8652c91dc0353bba424" kindref="member">subscription_manual_velocity</ref><sp/>=<sp/>self.create_subscription(Twist,<sp/></highlight><highlight class="stringliteral">&apos;/cmd_vel&apos;</highlight><highlight class="normal">,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a6bc0fe68ff350350370f7de88b72f9e3" kindref="member">manual_velocity_callback</ref>,<sp/>10)</highlight></codeline>
<codeline lineno="332"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="333"><highlight class="normal"></highlight></codeline>
<codeline lineno="334" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac70f0eb09aa2cf2dd554b84baba76604" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a190b68c9c4655abfbd5a990a54dc3273" kindref="member">safety_callback</ref>(self,<sp/>msg):</highlight></codeline>
<codeline lineno="335"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a79b88a3f3c9a844c88ba6451e51c9c02" kindref="member">safety_global_safety_valid</ref><sp/>=<sp/>msg.global_safety_valid</highlight></codeline>
<codeline lineno="336"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ad39564fb30b822f36010129074bd180a" kindref="member">safety_published_frequency</ref><sp/>=<sp/>msg.published_frequency</highlight></codeline>
<codeline lineno="337"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aab903957883c9d7e2c1ada16982c14b3" kindref="member">safety_depth_limit</ref><sp/>=<sp/>msg.depth_limit</highlight></codeline>
<codeline lineno="338"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a2822e9eee910d6ffd424e02d5cae5a20" kindref="member">safety_batteries_limit</ref><sp/>=<sp/>msg.batteries_limit</highlight></codeline>
<codeline lineno="339"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9c15928f0c91d1c49698c5415ece961b" kindref="member">safety_depressurization</ref><sp/>=<sp/>msg.depressurization</highlight></codeline>
<codeline lineno="340"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afe93b00dfc56f15fba7e078ef46ed82e" kindref="member">safety_seafloor</ref><sp/>=<sp/>msg.seafloor</highlight></codeline>
<codeline lineno="341"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1facb042f39ec3b1dc83a1e7c2864d9b" kindref="member">safety_piston</ref><sp/>=<sp/>msg.piston</highlight></codeline>
<codeline lineno="342"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a20c19d2383401ef1e8e186b009c8710e" kindref="member">safety_zero_depth</ref><sp/>=<sp/>msg.zero_depth</highlight></codeline>
<codeline lineno="343"><highlight class="normal"></highlight></codeline>
<codeline lineno="344" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac7bce8571d6e8afc7dcaa00487a6ab0c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a811fe7bcaa2d9c688613a92ec92de0ef" kindref="member">internal_sensor_callback</ref>(self,<sp/>msg):</highlight></codeline>
<codeline lineno="345"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a7b6291ebb05a3625da2b6c21fad73080" kindref="member">internal_pressure</ref><sp/>=<sp/>msg.pressure</highlight></codeline>
<codeline lineno="346"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a58eeac31b5b28eb161788aceded33dc7" kindref="member">internal_temperature</ref><sp/>=<sp/>msg.temperature</highlight></codeline>
<codeline lineno="347"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a37480048379f6acb2b2cf33a5972b503" kindref="member">internal_humidity</ref><sp/>=<sp/>msg.humidity</highlight></codeline>
<codeline lineno="348"><highlight class="normal"></highlight></codeline>
<codeline lineno="349" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a4dee4110e751f08ad26c08f9f2840406" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a4dee4110e751f08ad26c08f9f2840406" kindref="member">gpsd_callback</ref>(self,<sp/>msg):</highlight></codeline>
<codeline lineno="350"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a0dde0bc6e5038fa1dec68c8e58f43afe" kindref="member">valid_fix</ref><sp/>=<sp/>msg.mode<sp/>&gt;<sp/>GpsFix.MODE_NO_FIX</highlight></codeline>
<codeline lineno="351"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aa7ca502f4cdd6e9f8a4c02d06a67505b" kindref="member">fix_latitude</ref><sp/>=<sp/>msg.latitude<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>math.isnan(msg.latitude)<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>0.</highlight></codeline>
<codeline lineno="352"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a4e7c386a350947be23122972ac3532bf" kindref="member">fix_longitude</ref><sp/>=<sp/>msg.longitude<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>math.isnan(msg.longitude)<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>0.</highlight></codeline>
<codeline lineno="353"><highlight class="normal"></highlight></codeline>
<codeline lineno="354" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5f35de27b29e5ba4781bf50512dbdf8c" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5f35de27b29e5ba4781bf50512dbdf8c" kindref="member">power_callback</ref>(self,<sp/>msg):</highlight></codeline>
<codeline lineno="355"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac680d838e83e713513a804776a50f80d" kindref="member">battery</ref><sp/>=<sp/>msg.battery_volt</highlight></codeline>
<codeline lineno="356"><highlight class="normal"></highlight></codeline>
<codeline lineno="357" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a6cf035376f481b8cce732af1649cdb35" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5d9b14e1ff03ffb06e99fabc107e9f04" kindref="member">gnss_pose_callback</ref>(self,<sp/>msg):</highlight></codeline>
<codeline lineno="358"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5ba40bf2984ed0ed74d3ce6284309258" kindref="member">gnss_heading</ref><sp/>=<sp/>msg.heading<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>math.isnan(msg.heading)<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>0.</highlight></codeline>
<codeline lineno="359"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a7e8d62a14d6b9141872d5d164e131611" kindref="member">gnss_speed</ref><sp/>=<sp/>msg.velocity<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>math.isnan(msg.velocity)<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>0.</highlight></codeline>
<codeline lineno="360"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac9cc429e980b3b1b867e4f66154524df" kindref="member">gnss_mean_east</ref><sp/>=<sp/>msg.east<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>math.isnan(msg.east)<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>0.</highlight></codeline>
<codeline lineno="361"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a516f7a9b1949eee422c60e5d7035c552" kindref="member">gnss_mean_north</ref><sp/>=<sp/>msg.north<sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordflow">not</highlight><highlight class="normal"><sp/>math.isnan(msg.north)<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>0.</highlight></codeline>
<codeline lineno="362"><highlight class="normal"></highlight></codeline>
<codeline lineno="363" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a3e7996ed3cf1da869306084a8a9cccc2" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a3e7996ed3cf1da869306084a8a9cccc2" kindref="member">depth_callback</ref>(self,<sp/>msg):</highlight></codeline>
<codeline lineno="364"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a6defe024bbce00383f2f4fd47c4dab9d" kindref="member">depth</ref><sp/>=<sp/>msg.depth</highlight></codeline>
<codeline lineno="365"><highlight class="normal"></highlight></codeline>
<codeline lineno="366" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae1e96278546d7ddac988ddd05a729045" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a208d3bb159d5a3314559a887a56be95f" kindref="member">mission_callback</ref>(self,<sp/>msg):</highlight></codeline>
<codeline lineno="367"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a72df2d40c6ee619813d0e5dbf224f128" kindref="member">current_waypoint</ref><sp/>=<sp/>msg.waypoint_id</highlight></codeline>
<codeline lineno="368"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a4f6e14a31259d3a2f3252e57bdbd5035" kindref="member">mission_mode</ref><sp/>=<sp/>msg.mode</highlight></codeline>
<codeline lineno="369"><highlight class="normal"></highlight></codeline>
<codeline lineno="370" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a6bc0fe68ff350350370f7de88b72f9e3" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a6bc0fe68ff350350370f7de88b72f9e3" kindref="member">manual_velocity_callback</ref>(self,<sp/>msg):</highlight></codeline>
<codeline lineno="371"><highlight class="normal"></highlight></codeline>
<codeline lineno="372"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>If<sp/>the<sp/>manual<sp/>target<sp/>ID<sp/>is<sp/>-1,<sp/>it<sp/>means<sp/>no<sp/>target,<sp/>so<sp/>we<sp/>do<sp/>not<sp/>send<sp/>the<sp/>command</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="373"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9b6784a0fc0982d9446f2bc3029103db" kindref="member">manual_remote_id</ref><sp/>&lt;<sp/>0:</highlight></codeline>
<codeline lineno="374"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(</highlight><highlight class="stringliteral">&quot;No<sp/>manual<sp/>target<sp/>ID<sp/>set,<sp/>not<sp/>sending<sp/>command<sp/>to<sp/>xbee&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="375"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="376"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="377"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9b6784a0fc0982d9446f2bc3029103db" kindref="member">manual_remote_id</ref><sp/>&gt;<sp/>0<sp/></highlight><highlight class="keywordflow">and</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a43deb0840ce3143e046de58c62eedd02" kindref="member">manual_remote</ref><sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="378"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(</highlight><highlight class="stringliteral">&quot;Remote<sp/>target<sp/>not<sp/>discovered,<sp/>discovering...&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="379"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a43deb0840ce3143e046de58c62eedd02" kindref="member">manual_remote</ref>=self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a769608576894d8e3e2717426637c38a9" kindref="member">discover_remote</ref>(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9b6784a0fc0982d9446f2bc3029103db" kindref="member">manual_remote_id</ref>)</highlight></codeline>
<codeline lineno="380"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="381"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="382"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Serialize<sp/>the<sp/>command<sp/>to<sp/>send<sp/>to<sp/>the<sp/>xbee</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="383"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>0b0</highlight></codeline>
<codeline lineno="384"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bit_position<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="385"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_type<sp/>=<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5730c731958bfd87744fd66f514a95be" kindref="member">CMD_MSG_TYPE</ref>[</highlight><highlight class="stringliteral">&quot;THRUSTERS_CMD&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="386"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>message_type,<sp/>4,<sp/>bit_position)</highlight></codeline>
<codeline lineno="387"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>round((msg.linear.x+1)*100),<sp/>8,<sp/>bit_position)</highlight></codeline>
<codeline lineno="388"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>round((msg.angular.z+1)*100),<sp/>8,<sp/>bit_position)</highlight></codeline>
<codeline lineno="389"><highlight class="normal"></highlight></codeline>
<codeline lineno="390"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(f</highlight><highlight class="stringliteral">&quot;Sending<sp/>manual<sp/>command<sp/>to<sp/>xbee:<sp/>linear_x={msg.linear.x},<sp/>angular_z={msg.angular.z}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="391"><highlight class="normal"></highlight></codeline>
<codeline lineno="392"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Send<sp/>the<sp/>command<sp/>to<sp/>the<sp/>xbee</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="393"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>If<sp/>the<sp/>manual<sp/>target<sp/>ID<sp/>is<sp/>0,<sp/>it<sp/>means<sp/>broadcast,<sp/>so<sp/>we<sp/>send<sp/>the<sp/>command<sp/>to<sp/>all<sp/>xbee<sp/>devices</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="394"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9b6784a0fc0982d9446f2bc3029103db" kindref="member">manual_remote_id</ref><sp/>==<sp/>0:</highlight></codeline>
<codeline lineno="395"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.send_data_broadcast(data.to_bytes((bit_position+7)//8,<sp/>byteorder=</highlight><highlight class="stringliteral">&apos;little&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="396"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="397"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.send_data_async(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a43deb0840ce3143e046de58c62eedd02" kindref="member">manual_remote</ref>,data.to_bytes((bit_position+7)//8,<sp/>byteorder=</highlight><highlight class="stringliteral">&apos;little&apos;</highlight><highlight class="normal">))</highlight></codeline>
<codeline lineno="398"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline lineno="399"><highlight class="normal"></highlight></codeline>
<codeline lineno="400" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1abae28f4326dd8626be8474490722ff98" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1abae28f4326dd8626be8474490722ff98" kindref="member">timer_callback</ref>(self):</highlight></codeline>
<codeline lineno="401"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">#<sp/>Send<sp/>data<sp/>to<sp/>xbee</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="402"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9fa16d4a86cfae38102a085936b6f222" kindref="member">hostname_is_seabot</ref>:</highlight></codeline>
<codeline lineno="403"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a6defe024bbce00383f2f4fd47c4dab9d" kindref="member">depth</ref><sp/>&lt;<sp/>0.5<sp/></highlight><highlight class="keywordflow">or</highlight><highlight class="normal"><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a4f6e14a31259d3a2f3252e57bdbd5035" kindref="member">mission_mode</ref><sp/>==<sp/>0:</highlight></codeline>
<codeline lineno="404"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1a2c45ec15569de0ee725e21f811d5e5" kindref="member">xbee</ref>.send_data_broadcast(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae64146ce12aa8c9141956830b05de1ff" kindref="member">serialize_log_state</ref>()[0])</highlight></codeline>
<codeline lineno="405"><highlight class="normal"></highlight></codeline>
<codeline lineno="406" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a769608576894d8e3e2717426637c38a9" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a769608576894d8e3e2717426637c38a9" kindref="member">discover_remote</ref>(self,node_id):</highlight></codeline>
<codeline lineno="407"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>remote<sp/>=<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afde573e979e506ba4e175e6277797898" kindref="member">xnet</ref>.discover_device(</highlight><highlight class="stringliteral">&quot;seabot&quot;</highlight><highlight class="normal">+str(node_id))</highlight></codeline>
<codeline lineno="408"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>remote<sp/></highlight><highlight class="keywordflow">is</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">None</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="409"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().error(</highlight><highlight class="stringliteral">&quot;Remote<sp/>target<sp/>not<sp/>found&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="410"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="411"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>self.get_logger().info(f</highlight><highlight class="stringliteral">&quot;Remote<sp/>target<sp/>{remote.get_node_id()}<sp/>discovered<sp/>with<sp/>address<sp/>{remote.get_64bit_addr()}&quot;</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="412"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>remote</highlight></codeline>
<codeline lineno="413"><highlight class="normal"></highlight></codeline>
<codeline lineno="414" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae64146ce12aa8c9141956830b05de1ff" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ae64146ce12aa8c9141956830b05de1ff" kindref="member">serialize_log_state</ref>(self):</highlight></codeline>
<codeline lineno="415"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bit_position<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="416"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data<sp/>=<sp/>0b0</highlight></codeline>
<codeline lineno="417"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_type<sp/>=<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5730c731958bfd87744fd66f514a95be" kindref="member">CMD_MSG_TYPE</ref>[</highlight><highlight class="stringliteral">&quot;LOG_STATE&quot;</highlight><highlight class="normal">]</highlight></codeline>
<codeline lineno="418"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="419"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state<sp/>|=<sp/>(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a79b88a3f3c9a844c88ba6451e51c9c02" kindref="member">safety_global_safety_valid</ref><sp/>&amp;<sp/>0x1)<sp/>&lt;&lt;<sp/>0</highlight></codeline>
<codeline lineno="420"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state<sp/>|=<sp/>(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ad39564fb30b822f36010129074bd180a" kindref="member">safety_published_frequency</ref><sp/>&amp;<sp/>0x1)<sp/>&lt;&lt;<sp/>1</highlight></codeline>
<codeline lineno="421"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state<sp/>|=<sp/>(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aab903957883c9d7e2c1ada16982c14b3" kindref="member">safety_depth_limit</ref><sp/>&amp;<sp/>0x1)<sp/>&lt;&lt;<sp/>2</highlight></codeline>
<codeline lineno="422"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state<sp/>|=<sp/>(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a2822e9eee910d6ffd424e02d5cae5a20" kindref="member">safety_batteries_limit</ref><sp/>&amp;<sp/>0x1)<sp/>&lt;&lt;<sp/>3</highlight></codeline>
<codeline lineno="423"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state<sp/>|=<sp/>(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a9c15928f0c91d1c49698c5415ece961b" kindref="member">safety_depressurization</ref><sp/>&amp;<sp/>0x1)<sp/>&lt;&lt;<sp/>4</highlight></codeline>
<codeline lineno="424"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state<sp/>|=<sp/>(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1afe93b00dfc56f15fba7e078ef46ed82e" kindref="member">safety_seafloor</ref><sp/>&amp;<sp/>0x1)<sp/>&lt;&lt;<sp/>5</highlight></codeline>
<codeline lineno="425"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state<sp/>|=<sp/>(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a1facb042f39ec3b1dc83a1e7c2864d9b" kindref="member">safety_piston</ref><sp/>&amp;<sp/>0x1)<sp/>&lt;&lt;<sp/>6</highlight></codeline>
<codeline lineno="426"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state<sp/>|=<sp/>(self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a20c19d2383401ef1e8e186b009c8710e" kindref="member">safety_zero_depth</ref><sp/>&amp;<sp/>0x1)<sp/>&lt;&lt;<sp/>7</highlight></codeline>
<codeline lineno="427"><highlight class="normal"></highlight></codeline>
<codeline lineno="428"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>message_type,<sp/>4,<sp/>bit_position)</highlight></codeline>
<codeline lineno="429"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1aa7ca502f4cdd6e9f8a4c02d06a67505b" kindref="member">fix_latitude</ref>,<sp/>25,<sp/>bit_position,<sp/>value_min=-90.0,</highlight></codeline>
<codeline lineno="430"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_max=90.0,<sp/>flag_debug=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="431"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a4e7c386a350947be23122972ac3532bf" kindref="member">fix_longitude</ref>,<sp/>25,<sp/>bit_position,<sp/>value_min=-180.0,</highlight></codeline>
<codeline lineno="432"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_max=180.0,<sp/>flag_debug=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="433"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a7e8d62a14d6b9141872d5d164e131611" kindref="member">gnss_speed</ref>,<sp/>8,<sp/>bit_position,<sp/>value_min=0,<sp/>value_max=5.0,</highlight></codeline>
<codeline lineno="434"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>flag_debug=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="435"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5ba40bf2984ed0ed74d3ce6284309258" kindref="member">gnss_heading</ref>,<sp/>8,<sp/>bit_position,<sp/>value_min=0,<sp/>value_max=359.0,</highlight></codeline>
<codeline lineno="436"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>flag_debug=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="437"><highlight class="normal"></highlight></codeline>
<codeline lineno="438"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>state,<sp/>8,<sp/>bit_position,<sp/>flag_debug=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="439"><highlight class="normal"></highlight></codeline>
<codeline lineno="440"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ac680d838e83e713513a804776a50f80d" kindref="member">battery</ref>,<sp/>8,<sp/>bit_position,<sp/>value_min=12.0,<sp/>value_max=16.8,</highlight></codeline>
<codeline lineno="441"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>flag_debug=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="442"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a7b6291ebb05a3625da2b6c21fad73080" kindref="member">internal_pressure</ref>,<sp/>6,<sp/>bit_position,<sp/>value_min=680.0,</highlight></codeline>
<codeline lineno="443"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_max=800.0,<sp/>flag_debug=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="444"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a58eeac31b5b28eb161788aceded33dc7" kindref="member">internal_temperature</ref>,<sp/>6,<sp/>bit_position,<sp/>value_min=8.0,</highlight></codeline>
<codeline lineno="445"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_max=50.0,<sp/>flag_debug=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="446"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a37480048379f6acb2b2cf33a5972b503" kindref="member">internal_humidity</ref>,<sp/>6,<sp/>bit_position,<sp/>value_min=50.0,</highlight></codeline>
<codeline lineno="447"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>value_max=100.0,<sp/>flag_debug=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="448"><highlight class="normal"></highlight></codeline>
<codeline lineno="449"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a72df2d40c6ee619813d0e5dbf224f128" kindref="member">current_waypoint</ref>,<sp/>8,<sp/>bit_position,<sp/>flag_debug=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="450"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data,<sp/>bit_position,<sp/>_<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1ad1552bd10a88d1f1e5d4dbda95409cc1" kindref="member">serialize_data</ref>(data,<sp/>self.<ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1ab2504af7c3b135fddd01ef44e9293151" kindref="member">last_cmd_received</ref>,<sp/>4,<sp/>bit_position,<sp/>flag_debug=</highlight><highlight class="keyword">False</highlight><highlight class="normal">)</highlight></codeline>
<codeline lineno="451"><highlight class="normal"></highlight></codeline>
<codeline lineno="452"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>data.to_bytes(int(bit_position<sp/>/<sp/>8),<sp/>byteorder=</highlight><highlight class="stringliteral">&apos;little&apos;</highlight><highlight class="normal">),<sp/>message_type</highlight></codeline>
<codeline lineno="453"><highlight class="normal"></highlight></codeline>
<codeline lineno="454" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a76ff362ef2c2944e3cde71a7a49097da" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a76ff362ef2c2944e3cde71a7a49097da" kindref="member">deserialize_log_type</ref>(self,<sp/>data):</highlight></codeline>
<codeline lineno="455"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bit_position<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="456"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_type,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>4,<sp/>bit_position)</highlight></codeline>
<codeline lineno="457"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>message_type</highlight></codeline>
<codeline lineno="458"><highlight class="normal"></highlight></codeline>
<codeline lineno="459" refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5c4a914a898b9d544f3c3a9d54995649" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode_1a5c4a914a898b9d544f3c3a9d54995649" kindref="member">deserialize_log_state</ref>(self,<sp/>data):</highlight></codeline>
<codeline lineno="460"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>bit_position<sp/>=<sp/>0</highlight></codeline>
<codeline lineno="461"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="462"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>message_type,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>4,<sp/>bit_position)</highlight></codeline>
<codeline lineno="463"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;message_type&quot;</highlight><highlight class="normal">]<sp/>=<sp/>message_type</highlight></codeline>
<codeline lineno="464"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>latitude,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>25,<sp/>bit_position,<sp/>value_min=-90.0,<sp/>value_max=90.0)</highlight></codeline>
<codeline lineno="465"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;latitude&quot;</highlight><highlight class="normal">]<sp/>=<sp/>latitude</highlight></codeline>
<codeline lineno="466"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>longitude,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>25,<sp/>bit_position,<sp/>value_min=-180.0,<sp/>value_max=180.0)</highlight></codeline>
<codeline lineno="467"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;longitude&quot;</highlight><highlight class="normal">]<sp/>=<sp/>longitude</highlight></codeline>
<codeline lineno="468"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>speed,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>8,<sp/>bit_position,<sp/>value_min=0,<sp/>value_max=5.0)</highlight></codeline>
<codeline lineno="469"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;speed&quot;</highlight><highlight class="normal">]<sp/>=<sp/>speed</highlight></codeline>
<codeline lineno="470"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>heading,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>8,<sp/>bit_position,<sp/>value_min=0,<sp/>value_max=359.0)</highlight></codeline>
<codeline lineno="471"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;heading&quot;</highlight><highlight class="normal">]<sp/>=<sp/>heading</highlight></codeline>
<codeline lineno="472"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>state,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>8,<sp/>bit_position)</highlight></codeline>
<codeline lineno="473"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">]<sp/>=<sp/>{}</highlight></codeline>
<codeline lineno="474"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;global_safety_valid&quot;</highlight><highlight class="normal">]<sp/>=<sp/>(state<sp/>&gt;&gt;<sp/>0)<sp/>&amp;<sp/>0x1</highlight></codeline>
<codeline lineno="475"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;published_frequency&quot;</highlight><highlight class="normal">]<sp/>=<sp/>(state<sp/>&gt;&gt;<sp/>1)<sp/>&amp;<sp/>0x1</highlight></codeline>
<codeline lineno="476"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;depth_limit&quot;</highlight><highlight class="normal">]<sp/>=<sp/>(state<sp/>&gt;&gt;<sp/>2)<sp/>&amp;<sp/>0x1</highlight></codeline>
<codeline lineno="477"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;batteries_limit&quot;</highlight><highlight class="normal">]<sp/>=<sp/>(state<sp/>&gt;&gt;<sp/>3)<sp/>&amp;<sp/>0x1</highlight></codeline>
<codeline lineno="478"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;depressurization&quot;</highlight><highlight class="normal">]<sp/>=<sp/>(state<sp/>&gt;&gt;<sp/>4)<sp/>&amp;<sp/>0x1</highlight></codeline>
<codeline lineno="479"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;seafloor&quot;</highlight><highlight class="normal">]<sp/>=<sp/>(state<sp/>&gt;&gt;<sp/>5)<sp/>&amp;<sp/>0x1</highlight></codeline>
<codeline lineno="480"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;piston&quot;</highlight><highlight class="normal">]<sp/>=<sp/>(state<sp/>&gt;&gt;<sp/>6)<sp/>&amp;<sp/>0x1</highlight></codeline>
<codeline lineno="481"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;state&quot;</highlight><highlight class="normal">][</highlight><highlight class="stringliteral">&quot;zero_depth&quot;</highlight><highlight class="normal">]<sp/>=<sp/>(state<sp/>&gt;&gt;<sp/>7)<sp/>&amp;<sp/>0x1</highlight></codeline>
<codeline lineno="482"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>battery,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>8,<sp/>bit_position,<sp/>value_min=12.0,<sp/>value_max=16.8)</highlight></codeline>
<codeline lineno="483"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;battery&quot;</highlight><highlight class="normal">]<sp/>=<sp/>battery</highlight></codeline>
<codeline lineno="484"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>pressure,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>6,<sp/>bit_position,<sp/>value_min=680.0,<sp/>value_max=800.0)</highlight></codeline>
<codeline lineno="485"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;pressure&quot;</highlight><highlight class="normal">]<sp/>=<sp/>pressure</highlight></codeline>
<codeline lineno="486"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>temperature,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>6,<sp/>bit_position,<sp/>value_min=8.0,<sp/>value_max=50.0)</highlight></codeline>
<codeline lineno="487"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;temperature&quot;</highlight><highlight class="normal">]<sp/>=<sp/>temperature</highlight></codeline>
<codeline lineno="488"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>humidity,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>6,<sp/>bit_position,<sp/>value_min=50.0,<sp/>value_max=100.0)</highlight></codeline>
<codeline lineno="489"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;humidity&quot;</highlight><highlight class="normal">]<sp/>=<sp/>humidity</highlight></codeline>
<codeline lineno="490"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>waypoint,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>8,<sp/>bit_position)</highlight></codeline>
<codeline lineno="491"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;waypoint&quot;</highlight><highlight class="normal">]<sp/>=<sp/>waypoint</highlight></codeline>
<codeline lineno="492"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>last_cmd_received,<sp/>bit_position<sp/>=<sp/><ref refid="namespacexbee__driver_1_1xbee_1a52b9aa7d74e3efcd420a123131623856" kindref="member">deserialize_data</ref>(data,<sp/>4,<sp/>bit_position)</highlight></codeline>
<codeline lineno="493"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>data_dict[</highlight><highlight class="stringliteral">&quot;last_cmd_received&quot;</highlight><highlight class="normal">]<sp/>=<sp/>last_cmd_received</highlight></codeline>
<codeline lineno="494"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>data_dict</highlight></codeline>
<codeline lineno="495"><highlight class="normal"></highlight></codeline>
<codeline lineno="496" refid="namespacexbee__driver_1_1xbee_1ad7e050bd39c1f14be481637ee6ec0ae5" refkind="member"><highlight class="normal"></highlight><highlight class="keyword">def<sp/></highlight><highlight class="normal"><ref refid="namespacexbee__driver_1_1xbee_1ad7e050bd39c1f14be481637ee6ec0ae5" kindref="member">main</ref>(args=None):</highlight></codeline>
<codeline lineno="497"><highlight class="normal"><sp/><sp/><sp/><sp/>rclpy.init(args=args)</highlight></codeline>
<codeline lineno="498"><highlight class="normal"></highlight></codeline>
<codeline lineno="499"><highlight class="normal"><sp/><sp/><sp/><sp/>xbee_node<sp/>=<sp/><ref refid="classxbee__driver_1_1xbee_1_1XbeeNode" kindref="compound">XbeeNode</ref>()</highlight></codeline>
<codeline lineno="500"><highlight class="normal"><sp/><sp/><sp/><sp/>rclpy.spin(xbee_node)</highlight></codeline>
<codeline lineno="501"><highlight class="normal"></highlight></codeline>
<codeline lineno="502"><highlight class="normal"><sp/><sp/><sp/><sp/>xbee_node.destroy_node()</highlight></codeline>
<codeline lineno="503"><highlight class="normal"><sp/><sp/><sp/><sp/>rclpy.shutdown()</highlight></codeline>
<codeline lineno="504"><highlight class="normal"></highlight></codeline>
<codeline lineno="505"><highlight class="normal"></highlight></codeline>
<codeline lineno="506"><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>__name__<sp/>==<sp/></highlight><highlight class="stringliteral">&apos;__main__&apos;</highlight><highlight class="normal">:</highlight></codeline>
<codeline lineno="507"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="namespacexbee__driver_1_1xbee_1ad7e050bd39c1f14be481637ee6ec0ae5" kindref="member">main</ref>()</highlight></codeline>
    </programlisting>
    <location file="/home/tristanlf/seabot2/seabot2-ros/src/seabot2_driver/xbee_driver/xbee_driver/xbee.py"/>
  </compounddef>
</doxygen>
